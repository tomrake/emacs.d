<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2024-12-02 Mon 15:20 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>The Emacs configuration of Tom Rake</title>
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
</head>
<body>
<div id="content" class="content">
<h1 class="title">The Emacs configuration of Tom Rake</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org31ceb1e">Add Generated from Emacs.org warning.</a></li>
<li><a href="#org5dfc154">Emacs debug-on-error</a></li>
<li><a href="#orgfc29348">start the multi-init-cluster for our case.</a></li>
<li><a href="#org8230790">Anaphoric - it macros that do-the-right-thing</a></li>
<li><a href="#orgef07753">Track init.el completion</a></li>
<li><a href="#org74e8f67">Auto-tangle Emacs.org</a></li>
<li><a href="#orgb1d19e9">Some of our routines are in scripts/</a></li>
<li><a href="#org5432be1">Emacs Garbage Collection Tweeking</a></li>
<li><a href="#org15b61b9">Font and Frame Tweeking</a></li>
<li><a href="#org40fbdb5">Initial Buffer Choice</a></li>
<li><a href="#org655982f">Default Coding System</a></li>
<li><a href="#orge06013c">Report Startup Time</a></li>
<li><a href="#org6248d28">The emacs customization file.</a></li>
<li><a href="#org51ecdc9">Straight Package manager</a></li>
<li><a href="#orgf8ee1bb">Package and package archives</a></li>
<li><a href="#org5457fb0">load use-package</a></li>
<li><a href="#orga08625c">Directly install htmlize</a></li>
<li><a href="#org89b27c8">Allow loading of a file from .emacs.d/</a>
<ul>
<li>
<ul>
<li><a href="#orgd081770">[TBD] Once the init.el generation is working</a></li>
</ul>
</li>
<li><a href="#orge923292">User custom setting from .emacs.d files.</a></li>
</ul>
</li>
<li><a href="#org69d1b50">Magic Modes</a></li>
<li><a href="#orga41f607">Initial Frame Size</a></li>
<li><a href="#org04545a8">Basic Look and feel</a></li>
<li><a href="#org72cb492">Fix Windows 10 cursor problem</a></li>
<li><a href="#org687385c">Buffer Auto reverting</a></li>
<li><a href="#org067b047">IDO</a></li>
<li><a href="#orgd1409f8">Which-Key</a></li>
<li><a href="#orga41821e">Vertico</a></li>
<li><a href="#org1e66392">org-roam NO TANGLE</a></li>
<li><a href="#org124bac4">Obsidian</a></li>
<li><a href="#orga427ff1">Ispell configured with Aspell</a></li>
<li><a href="#orga23acd0">JAVA Interface</a></li>
<li><a href="#org586abd4">Language Tool</a></li>
<li><a href="#org914be64">Joining items as strings with and without quoting</a></li>
<li><a href="#org753de92">Ensure gnu-tools</a></li>
<li><a href="#org85b4e5b">Magit</a></li>
<li><a href="#orgf0c3405">SSH Agency</a></li>
<li><a href="#orgcd56324">Roswell</a></li>
<li><a href="#orgfae6307">Modus Theme Configuration</a></li>
<li><a href="#orge850dfb">Rainbow Delimeters</a></li>
<li><a href="#org2e488fb">Powershell</a></li>
<li><a href="#org00d7622">Shells</a></li>
<li><a href="#org71f2ccd">Eshell</a></li>
<li><a href="#org36dd232">Add shell extensions</a></li>
<li><a href="#org3e851c5">Tramp</a></li>
<li><a href="#org1eb5453">Paredit mode</a></li>
<li><a href="#org7c4cf9f">Common Lisp mode slime or sly</a></li>
<li><a href="#org82bab44">Taging of Inferior Invokers</a></li>
<li><a href="#org9c86f38">SBCL  Invoker</a></li>
<li><a href="#orgf273c8d">CCL Invokers</a></li>
<li><a href="#orgf1419ce">ABCL</a></li>
<li><a href="#org7907147">Collect Lisp Invokers</a></li>
<li><a href="#orgf0e0fc2">SLIME</a></li>
<li><a href="#orgce72a71">SLY</a></li>
<li><a href="#org5b85f6c">Enable lisp-mode .lisp and .asd files</a></li>
<li><a href="#org49adfc1">Common Lisp HyperSpec</a></li>
<li><a href="#orga87b5a3">Hyperspec Root is loaded from Enviroment location</a></li>
<li><a href="#org82d6b7c">Pascal Setup</a></li>
<li><a href="#orga932091">simple httpd</a></li>
<li><a href="#org5e9481a">PS Print with GHOSTSCRIPT</a></li>
<li><a href="#orgd746887">Emacs Backup Files</a></li>
<li><a href="#org3ba65ed">Eshell</a></li>
<li><a href="#org3eafee1">Dired</a>
<ul>
<li><a href="#orgc587434">dired hook</a></li>
<li><a href="#org4717aa0">Single Dired buffer</a></li>
<li><a href="#org7639557">All the icons</a></li>
<li><a href="#org667e30d">File Sort Order</a></li>
<li><a href="#org986febd">diredc - NOT TANGLED</a></li>
<li><a href="#org7c5a5ba">Peep Dired - NOT TANGLED</a></li>
</ul>
</li>
<li><a href="#org6c16ae7">Mastodon</a></li>
<li><a href="#org562482f">Openwith</a></li>
<li><a href="#org98a58fa">Recentf</a></li>
<li><a href="#orgddc660f">PDF-TOOLS</a></li>
<li><a href="#org270ecef">PPL Time of Day</a></li>
<li><a href="#org83cb1dd">YAML Mode</a></li>
<li><a href="#orgc8f2278">JSON to Single line</a></li>
<li><a href="#org10fb64f">load per user settings</a></li>
<li><a href="#org0ccf3b9">Sourcing of Scripts</a></li>
<li><a href="#orgcc6409c">ERC</a></li>
<li><a href="#orge82ee93">org-publish</a></li>
<li><a href="#org33fd9bd">Org Mode</a>
<ul>
<li><a href="#org5d683bb">&lt;&lt; The Open  ( use-package for org</a></li>
<li><a href="#org9482ee9">Ensure there are standard user ~/org directories</a></li>
<li><a href="#org3b803a3">The exact form of org files largely from this file Emacs.org</a></li>
<li><a href="#org7ebc797">Org Key Binding</a></li>
<li><a href="#org8685f11">Make tab act natively in org source blocks</a></li>
<li><a href="#orge39573c">Configure org-export</a></li>
<li><a href="#org1f96bda">Org Structure Templates</a></li>
<li><a href="#org325854b">killing frame for org-protcol capture</a></li>
<li><a href="#org0793e7e">org-present</a></li>
<li><a href="#orgd6a41d4">org mode add :shcmd to sh blocks</a></li>
<li><a href="#orga3b56cb">Add web image links</a></li>
<li><a href="#org5c661eb">Configure BABEL languages</a></li>
<li><a href="#org3b9d37b">org modules needed</a></li>
<li><a href="#orgf6302e6">Magic F5 Key</a></li>
<li><a href="#org7b5f586">THE BIG GTD AGENDA CONFIGURATION</a></li>
<li><a href="#org8b1efe0">org-habit</a></li>
<li><a href="#orgf3b2dca">The highly strcuctured "Big Agends"</a></li>
<li><a href="#org044f639">global org paths</a></li>
<li><a href="#orgf422512">Refile configuration</a></li>
<li><a href="#org25f6948">Capture Templates</a></li>
<li><a href="#org7fda417">Control Agenda logging</a></li>
<li><a href="#org14319b4">Various agenda files for various reporting reasons</a></li>
<li><a href="#org4971905">Construct my custom agenda items</a></li>
<li><a href="#orgfef3fcb">GTD Switch</a></li>
<li><a href="#org98dce15">&gt;&gt;The close of the (use-package org config</a></li>
</ul>
</li>
<li><a href="#org17190b1">Adjust for better GC</a></li>
<li><a href="#orge5ce4ee">Test for init.el completion</a></li>
<li><a href="#orgf922922">Load config</a></li>
</ul>
</div>
</div>
<p>
Added debugged org and Modus Theme
</p>
<div id="outline-container-org31ceb1e" class="outline-2">
<h2 id="org31ceb1e">Add Generated from Emacs.org warning.</h2>
<div class="outline-text-2" id="text-org31ceb1e">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">NOTE: init.el is now generated from Emacs.org.  Please edit that file</span>
<span style="color: #989898; font-style: italic;">;;       </span><span style="color: #989898; font-style: italic;">in Emacs and init.el will be generated automatically!</span>
<span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">Trying straight package manager</span>
<span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">Org mode loads!</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5dfc154" class="outline-2">
<h2 id="org5dfc154">Emacs debug-on-error</h2>
<div class="outline-text-2" id="text-org5dfc154">
<p>
[TBD] Should this be set from an enviroment variable.
[TBD] Is there already a command line switch for this?
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">Emacs Debug On Error</span>
   (<span style="color: #b6a0ff;">setq</span> debug-on-error nil )
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfc29348" class="outline-2">
<h2 id="orgfc29348">start the multi-init-cluster for our case.</h2>
<div class="outline-text-2" id="text-orgfc29348">
<p>
chemacs2 startup
<a href="file:///c:/Users/zzzap/.emacs-profiles.el">file:///c:/Users/zzzap/.emacs-profiles.el</a>
</p>

<p>
If you are cloning my process you will need this code to run very soon in your init.el.
Until you create the file named by the local-config-pathname: message. 
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">This code will error for any non-multi-init-cluster profiles.</span>
<span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">load the user-custom-startup file.</span>
<span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">The local-config is</span>
<span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">loaded from the file &lt;user-emacs-directory&gt;/multi-init-cluster/&lt;system-name&gt;-&lt;user-login-name&gt;-&lt;chemacs-profile-name&gt;-user-startup.el</span>
<span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">That file must exist.</span>
<span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">the user-emacs-directory and chemacs-profile-names are defined in ~/.emacs-profiles.el</span>
(message <span style="color: #79a8ff;">"chemacs-profile-name   : %s"</span> chemacs-profile-name)
(message <span style="color: #79a8ff;">"system-name            : %s"</span> system-name)
(message <span style="color: #79a8ff;">"user-login-name        : %s"</span> user-login-name)
(<span style="color: #b6a0ff;">if</span> chemacs-profile-name
    (<span style="color: #b6a0ff;">progn</span>
      (<span style="color: #b6a0ff;">defvar</span> <span style="color: #00d3d0;">local-config-name</span> (concat system-name <span style="color: #79a8ff;">"-"</span> user-login-name <span style="color: #79a8ff;">"-"</span> chemacs-profile-name <span style="color: #79a8ff;">"-user-startup"</span>)
        <span style="color: #9ac8e0; font-style: italic;">"The name of local-config file."</span>)
      (<span style="color: #b6a0ff;">defvar</span> <span style="color: #00d3d0;">local-config-pathname</span> (concat user-emacs-directory <span style="color: #79a8ff;">"multi-init-cluster/"</span> local-config-name)
        <span style="color: #9ac8e0; font-style: italic;">"The filename to load the local-config."</span>)
      (message <span style="color: #79a8ff;">"local-config-pathname  : %s"</span> local-config-pathname)
      (load local-config-pathname))
  (<span style="color: #b6a0ff;">progn</span>
    (message <span style="color: #79a8ff;">"This config should be executed by chemacs2 and chemacs-profile-name is not defined "</span>)
    (<span style="color: #fec43f;">error</span> <span style="color: #79a8ff;">"Bad chemacs config."</span>)))
(message <span style="color: #79a8ff;">"---------- Done with multi-init-cluster startup -------"</span>)

</pre>
</div>
</div>
</div>

<div id="outline-container-org8230790" class="outline-2">
<h2 id="org8230790">Anaphoric - it macros that do-the-right-thing</h2>
<div class="outline-text-2" id="text-org8230790">
<p>
Express various configuration contingent of certain conditions being met.
Code is executed based on certain tests based on COMPUTER-SUBCASE-user-start symbol values.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defmacro</span> <span style="color: #feacd0;">checksym-defined</span> (name <span style="color: #6ae4b9;">&amp;rest</span> body)
  <span style="color: #9ac8e0; font-style: italic;">"Anaphoric - it macro, where the body can uss *it* when symbol name is defined."</span>
  (<span style="color: #b6a0ff;">let</span> ((_sym (gensym)))
    `(<span style="color: #b6a0ff;">let</span> ((,_sym (intern-soft ,name)))
       (<span style="color: #b6a0ff;">when</span> ,_sym
         (<span style="color: #b6a0ff;">let</span> ((it (symbol-value ,_sym)))
           ,@body)))))

(<span style="color: #b6a0ff;">defmacro</span> <span style="color: #feacd0;">checksym-not-nil</span> (name <span style="color: #6ae4b9;">&amp;rest</span> body)
  <span style="color: #9ac8e0; font-style: italic;">"Anaphoric - it macro, where the body can uss *it* when symbol name is defined."</span>
  <span style="color: #79a8ff;">"Execute the body when the symbol is not nil"</span>
  (<span style="color: #b6a0ff;">let</span> ((_sym (gensym)))
    `(<span style="color: #b6a0ff;">let</span> ((,_sym (intern-soft ,name)))
       (<span style="color: #b6a0ff;">when</span> (,_sym (symbol-value ,_sym))
         (<span style="color: #b6a0ff;">let</span> ((it (symbol-value ,_sym)))
           ,@body)))))

(<span style="color: #b6a0ff;">defmacro</span> <span style="color: #feacd0;">checksym-not-empty-string</span> (name <span style="color: #6ae4b9;">&amp;rest</span> body)
  <span style="color: #9ac8e0; font-style: italic;">"Anaphoric - it macro, where the body can uss *it* when symbol name is a string that is not empty."</span>
  (<span style="color: #b6a0ff;">let</span> ((_sym (gensym)))
    `(<span style="color: #b6a0ff;">let</span> ((,_sym (intern-soft ,name)))
       (<span style="color: #b6a0ff;">when</span> ,_sym
         (<span style="color: #b6a0ff;">let</span> ((it (symbol-value ,_sym)))
           (<span style="color: #b6a0ff;">when</span> (<span style="color: #b6a0ff;">and</span> (stringp it) (&lt; 0 (length it)))
             ,@body))))))




(<span style="color: #b6a0ff;">defmacro</span> <span style="color: #feacd0;">checksym-existing-file</span> (name <span style="color: #6ae4b9;">&amp;rest</span> body)
  <span style="color: #9ac8e0; font-style: italic;">"Anaphoric - it macro, where the body can uss *it* when symbol name is a the name of an existing file."</span>
  (<span style="color: #b6a0ff;">let</span> ((_sym (gensym)))
    `(<span style="color: #b6a0ff;">let</span> ((,_sym (intern-soft ,name)))
       (<span style="color: #b6a0ff;">when</span> ,_sym
         (<span style="color: #b6a0ff;">let</span> ((it (symbol-value ,_sym)))
           (<span style="color: #b6a0ff;">when</span> (<span style="color: #b6a0ff;">and</span> (stringp it) (file-exists-p it))
               ,@body))))))


(<span style="color: #b6a0ff;">defmacro</span> <span style="color: #feacd0;">checksym-existing-directory</span> (name <span style="color: #6ae4b9;">&amp;rest</span> body)
      <span style="color: #9ac8e0; font-style: italic;">"Anaphoric - it macro, where the body can us *it* when symbol name is a the name of an existing directory."</span>
  (<span style="color: #b6a0ff;">let</span> ((_sym (gensym)))
    `(<span style="color: #b6a0ff;">let</span> ((,_sym (intern-soft ,name)))
       (<span style="color: #b6a0ff;">when</span> ,_sym
         (<span style="color: #b6a0ff;">let</span> ((it (symbol-value ,_sym)))
           (<span style="color: #b6a0ff;">when</span> (<span style="color: #b6a0ff;">and</span> (stringp it) (file-directory-p it))
               ,@body))))))

</pre>
</div>
</div>
</div>

<div id="outline-container-orgef07753" class="outline-2">
<h2 id="orgef07753">Track init.el completion</h2>
<div class="outline-text-2" id="text-orgef07753">
<p>
Set a init loading flag, check and report if the flag is not clear in the after init-hook.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> twr/init-loading-flag <span style="color: #79a8ff;">"default"</span>)
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">twr/check-init-load</span> ()
  (<span style="color: #b6a0ff;">when</span> twr/init-loading-flag
    (message (concat <span style="color: #79a8ff;">"INIT DID NOT FINISH!!!!!! "</span> twr/init-loading-flag))))
(add-hook 'after-init-hook 'twr/check-init-load)
</pre>
</div>
</div>
</div>
<div id="outline-container-org74e8f67" class="outline-2">
<h2 id="org74e8f67">Auto-tangle Emacs.org</h2>
<div class="outline-text-2" id="text-org74e8f67">
<p>
This is a modifed from systemcrafters.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(message (concat <span style="color: #79a8ff;">"Init buffer: :"</span> (buffer-file-name)))
(<span style="color: #b6a0ff;">unless</span> (string-equal (buffer-file-name)
                      (expand-file-name (concat user-emacs-directory <span style="color: #79a8ff;">"init.el"</span>)))
  (<span style="color: #fec43f;">error</span> <span style="color: #79a8ff;">"init.el tangle check failed"</span>))
</pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">Autommatically tangle our Emacs.org config file when we save it.</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">efs/org-babel-tangle-config</span> ()
  <span style="color: #9ac8e0; font-style: italic;">"Test if the buffer should be auto-tangled after save"</span>
  <span style="color: #989898; font-style: italic;">; </span><span style="color: #989898; font-style: italic;">(message "string-equal: %s %s" (buffer-file-name) (expand-file-name (concat user-emacs-directory "Emacs.org")))</span>
  (<span style="color: #b6a0ff;">when</span> (string-equal (buffer-file-name)
                      (expand-file-name (concat user-emacs-directory <span style="color: #79a8ff;">"Emacs.org"</span>)))
    (message <span style="color: #79a8ff;">"Begin efs/tangle"</span>)

    <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">Dynamic scoping to the rescue</span>
    (<span style="color: #b6a0ff;">let</span> ((org-confirm-babel-evaluate nil))
      (org-babel-tangle))))
(add-hook 'org-mode-hook (<span style="color: #b6a0ff;">lambda</span> () (add-hook 'after-save-hook #'efs/org-babel-tangle-config)))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb1d19e9" class="outline-2">
<h2 id="orgb1d19e9">Some of our routines are in scripts/</h2>
<div class="outline-text-2" id="text-orgb1d19e9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'load-path (expand-file-name <span style="color: #79a8ff;">"scripts/"</span> user-emacs-directory))
</pre>
</div>
</div>
</div>
<div id="outline-container-org5432be1" class="outline-2">
<h2 id="org5432be1">Emacs Garbage Collection Tweeking</h2>
<div class="outline-text-2" id="text-org5432be1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> gc-cons-threshold (* 50 1000 1000))
</pre>
</div>
</div>
</div>
<div id="outline-container-org15b61b9" class="outline-2">
<h2 id="org15b61b9">Font and Frame Tweeking</h2>
<div class="outline-text-2" id="text-org15b61b9">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">You will most likely need to adjust this font size for your system!</span>
(<span style="color: #b6a0ff;">defvar</span> <span style="color: #00d3d0;">efs/default-font-size</span> 180)
(<span style="color: #b6a0ff;">defvar</span> <span style="color: #00d3d0;">efs/default-variable-font-size</span> 180)

<span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">Make frame transparency overridable</span>
(<span style="color: #b6a0ff;">defvar</span> <span style="color: #00d3d0;">efs/frame-transparency</span> '(90 . 90))
</pre>
</div>
</div>
</div>

<div id="outline-container-org40fbdb5" class="outline-2">
<h2 id="org40fbdb5">Initial Buffer Choice</h2>
<div class="outline-text-2" id="text-org40fbdb5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">find-first-existing-file</span> (files)
  (<span style="color: #b6a0ff;">if</span> (listp files)
      (<span style="color: #b6a0ff;">if</span> (null files)
        nil
        (<span style="color: #b6a0ff;">let</span> ((file (car files)))
          (<span style="color: #b6a0ff;">if</span> (<span style="color: #b6a0ff;">and</span> file (file-exists-p file))
            file
            (find-first-existing-file (cdr files)))))
    (<span style="color: #fec43f;">error</span> <span style="color: #79a8ff;">"files should be a list but is %s"</span> files)))
  (<span style="color: #b6a0ff;">setq</span> initial-buffer-choice
        (find-first-existing-file (list <span style="color: #79a8ff;">"~/startup-buffer.org"</span>
                                         (concat user-emacs-directory <span style="color: #79a8ff;">"startup-buffer.org"</span>))))
</pre>
</div>
</div>
</div>
<div id="outline-container-org655982f" class="outline-2">
<h2 id="org655982f">Default Coding System</h2>
<div class="outline-text-2" id="text-org655982f">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">UTF-8 as default encoding</span>
(set-language-environment <span style="color: #79a8ff;">"UTF-8"</span>)
(set-default-coding-systems 'utf-8)
(set-keyboard-coding-system 'utf-8-unix)

<span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">do this especially on Windows, else python output problem</span>
(set-terminal-coding-system 'utf-8-unix)  
</pre>
</div>
</div>
</div>
<div id="outline-container-orge06013c" class="outline-2">
<h2 id="orge06013c">Report Startup Time</h2>
<div class="outline-text-2" id="text-orge06013c">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">Reporting Startup Time</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">efs/display-startup-time</span> ()
  (message <span style="color: #79a8ff;">"Emacs loaded in %s with %d garbage collections."</span>
           (format <span style="color: #79a8ff;">"%.2f seconds"</span>
                   (float-time
                    (time-subtract after-init-time before-init-time)))
           gcs-done))

(add-hook 'emacs-startup-hook #'efs/display-startup-time)
</pre>
</div>
</div>
</div>
<div id="outline-container-org6248d28" class="outline-2">
<h2 id="org6248d28">The emacs customization file.</h2>
<div class="outline-text-2" id="text-org6248d28">
<p>
Define were emacs cusomization is saved and restored.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">define emacs customization file and load it.</span>
(<span style="color: #b6a0ff;">setq</span> custom-file (expand-file-name <span style="color: #79a8ff;">"emacs-custom.el"</span> user-emacs-directory))
(load custom-file)
</pre>
</div>
</div>
</div>
<div id="outline-container-org51ecdc9" class="outline-2">
<h2 id="org51ecdc9">Straight Package manager</h2>
<div class="outline-text-2" id="text-org51ecdc9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defvar</span> <span style="color: #00d3d0;">bootstrap-version</span>)
(<span style="color: #b6a0ff;">let</span> ((bootstrap-file
       (expand-file-name <span style="color: #79a8ff;">"straight/repos/straight.el/bootstrap.el"</span> user-emacs-directory))
      (bootstrap-version 5))
  (<span style="color: #b6a0ff;">unless</span> (file-exists-p bootstrap-file)
    (<span style="color: #b6a0ff;">with-current-buffer</span>
        (url-retrieve-synchronously
         <span style="color: #79a8ff;">"https://raw.githubusercontent.com/raxod502/straight.el/develop/install.el"</span>
         'silent 'inhibit-cookies)
      (goto-char (point-max))
      (eval-print-last-sexp)))
  (load bootstrap-file nil 'nomessage))
  (straight-use-package 'use-package) 
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf8ee1bb" class="outline-2">
<h2 id="orgf8ee1bb">Package and package archives</h2>
<div class="outline-text-2" id="text-orgf8ee1bb">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">Initialize package sources</span>
(<span style="color: #b6a0ff;">require</span> '<span style="color: #00bcff;">package</span>)
<span style="color: #989898; font-style: italic;">;</span><span style="color: #989898; font-style: italic;">(setq package-check-signature nil)</span>
(<span style="color: #b6a0ff;">setq</span> package-gnupghome-dir <span style="color: #79a8ff;">"~/.gnupg/"</span>)
(<span style="color: #b6a0ff;">setq</span> package-archives '((<span style="color: #79a8ff;">"melpa"</span> . <span style="color: #79a8ff;">"https://melpa.org/packages/"</span>)
                         (<span style="color: #79a8ff;">"org"</span> . <span style="color: #79a8ff;">"https://orgmode.org/elpa/"</span>)
                         (<span style="color: #79a8ff;">"elpa"</span> . <span style="color: #79a8ff;">"https://elpa.gnu.org/packages/"</span>)))

(package-initialize)
(<span style="color: #b6a0ff;">unless</span> package-archive-contents
  (package-refresh-contents))


</pre>
</div>
</div>
</div>
<div id="outline-container-org5457fb0" class="outline-2">
<h2 id="org5457fb0">load use-package</h2>
<div class="outline-text-2" id="text-org5457fb0">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">Initialize use-package on non-Linux platforms</span>
  (<span style="color: #b6a0ff;">unless</span> (package-installed-p 'use-package)
    (package-install 'use-package))
  <span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">use-package</span>
  (<span style="color: #b6a0ff;">require</span> '<span style="color: #00bcff;">use-package</span>)
  (<span style="color: #b6a0ff;">setq</span> straight-use-package-by-default t)
  (<span style="color: #b6a0ff;">setq</span> use-package-verbose t)
  (<span style="color: #b6a0ff;">setq</span> use-package-always-defer t)

</pre>
</div>
</div>
</div>
<div id="outline-container-orga08625c" class="outline-2">
<h2 id="orga08625c">Directly install htmlize</h2>
<div class="outline-text-2" id="text-orga08625c">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(straight-use-package 'htmlize)
</pre>
</div>
</div>
</div>
<div id="outline-container-org89b27c8" class="outline-2">
<h2 id="org89b27c8">Allow loading of a file from .emacs.d/</h2>
<div class="outline-text-2" id="text-org89b27c8">
</div>
<div id="outline-container-orgd081770" class="outline-4">
<h4 id="orgd081770">[TBD] Once the init.el generation is working</h4>
<div class="outline-text-4" id="text-orgd081770">
<ul class="org-ul">
<li>autosaving other .emacs.d/ configuration files could be done
the following macro will need to be reconsidered.</li>
</ul>
</div>
</div>

<div id="outline-container-orge923292" class="outline-3">
<h3 id="orge923292">User custom setting from .emacs.d files.</h3>
<div class="outline-text-3" id="text-orge923292">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">Macro to load user customizations from .emacs.d</span>
(<span style="color: #b6a0ff;">defmacro</span> <span style="color: #feacd0;">local-custom-file</span> (file description)
  `(<span style="color: #b6a0ff;">progn</span>
     <span style="color: #989898; font-style: italic;">;</span><span style="color: #989898; font-style: italic;">(require 'org)</span>
     <span style="color: #989898; font-style: italic;">;;</span><span style="color: #989898; font-style: italic;">(message (concat "Looking for " ,description " file: " ,file ))</span>
     (<span style="color: #b6a0ff;">let</span> ((file-and-path (expand-file-name ,file user-emacs-directory)))
       (<span style="color: #b6a0ff;">if</span> (file-exists-p file-and-path)
           (<span style="color: #b6a0ff;">progn</span> <span style="color: #989898; font-style: italic;">;;</span><span style="color: #989898; font-style: italic;">(message (concat "org-babel-load of " file-and-path))</span>
                  (<span style="color: #b6a0ff;">require</span> '<span style="color: #00bcff;">org</span>)
                  (org-babel-load-file file-and-path))
         (message (concat <span style="color: #79a8ff;">"Custom file is missing "</span> file-and-path))))))

</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org69d1b50" class="outline-2">
<h2 id="org69d1b50">Magic Modes</h2>
<div class="outline-text-2" id="text-org69d1b50">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">Magic File modes</span>
(<span style="color: #b6a0ff;">setq</span> magic-mode-alist '((<span style="color: #79a8ff;">"*.org"</span> . org)))
</pre>
</div>
</div>
</div>
<div id="outline-container-orga41f607" class="outline-2">
<h2 id="orga41f607">Initial Frame Size</h2>
<div class="outline-text-2" id="text-orga41f607">
<p>
<a href="https://www.gnu.org/software/emacs/manual/html_node/efaq/Fullscreen-mode-on-MS_002dWindows.html">https://www.gnu.org/software/emacs/manual/html_node/efaq/Fullscreen-mode-on-MS_002dWindows.html</a>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'emacs-startup-hook 'toggle-frame-maximized)
</pre>
</div>
<p>
Fix initial window position.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">Set initial frame size and position</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/set-initial-frame</span> ()
  (<span style="color: #b6a0ff;">let*</span> ((base-factor 0.70)
        (a-width (* (display-pixel-width) base-factor))
        (a-height (* (display-pixel-height) base-factor))
        (a-left (truncate (/ (- (display-pixel-width) a-width) 2)))
        (a-top (truncate (/ (- (display-pixel-height) a-height) 2))))
    (set-frame-position (selected-frame) a-left a-top)
    (set-frame-size (selected-frame) (truncate a-width)  (truncate a-height) t)))
(<span style="color: #b6a0ff;">setq</span> frame-resize-pixelwise t)
(my/set-initial-frame)
</pre>
</div>
</div>
</div>

<div id="outline-container-org04545a8" class="outline-2">
<h2 id="org04545a8">Basic Look and feel</h2>
<div class="outline-text-2" id="text-org04545a8">
<p>
I don't like the a messy startup screen.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">Have a clean statup screen</span>
<span style="color: #989898; font-style: italic;">; </span><span style="color: #989898; font-style: italic;">(setq inhibit-startup-screen t)</span>
(<span style="color: #b6a0ff;">setq</span> visible-bell 1)
 <span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">Turn off tool bar</span>
(tool-bar-mode 0)
(<span style="color: #b6a0ff;">setq</span> use-file-dialog nil)
</pre>
</div>
</div>
</div>
<div id="outline-container-org72cb492" class="outline-2">
<h2 id="org72cb492">Fix Windows 10 cursor problem</h2>
<div class="outline-text-2" id="text-org72cb492">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> w32-use-visible-system-caret nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-org687385c" class="outline-2">
<h2 id="org687385c">Buffer Auto reverting</h2>
<div class="outline-text-2" id="text-org687385c">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">auto revert mode</span>
(global-auto-revert-mode 1)

<span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">dired auto revert</span>
(<span style="color: #b6a0ff;">setf</span> global-auto-revert-non-file-buffers t)
</pre>
</div>
</div>
</div>
<div id="outline-container-org067b047" class="outline-2">
<h2 id="org067b047">IDO</h2>
<div class="outline-text-2" id="text-org067b047">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span>  <span style="color: #00bcff;">ido</span>
    <span style="color: #f78fe7;">:config</span>
  (ido-mode t))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd1409f8" class="outline-2">
<h2 id="orgd1409f8">Which-Key</h2>
<div class="outline-text-2" id="text-orgd1409f8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">which-key</span>
  <span style="color: #f78fe7;">:straight</span> t)
</pre>
</div>
</div>
</div>
<div id="outline-container-orga41821e" class="outline-2">
<h2 id="orga41821e">Vertico</h2>
<div class="outline-text-2" id="text-orga41821e">
<p>
This is recommended setup from  <a href="https://github.com/minad/vertico">https://github.com/minad/vertico</a>
I have the following issues
</p>
<ul class="org-ul">
<li>I want the list resized when windows is resized</li>
<li>I want the items sorted alpha, directories at the top.
<a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Programmed-Completion.html">https://www.gnu.org/software/emacs/manual/html_node/elisp/Programmed-Completion.html</a>
<ul class="org-ul">
<li>display-sort-function</li>
<li>completion-table-dynamic ???</li>
</ul></li>
</ul>
<p>
Read up on <a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Completion.html">https://www.gnu.org/software/emacs/manual/html_node/elisp/Completion.html</a>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">Enable vertico</span>
(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">vertico</span>
  <span style="color: #f78fe7;">:straight</span> t
  <span style="color: #f78fe7;">:init</span>
  (vertico-mode))

(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">savehist</span>
  <span style="color: #f78fe7;">:init</span>
  (savehist-mode))
</pre>
</div>
</div>
</div>
<div id="outline-container-org1e66392" class="outline-2">
<h2 id="org1e66392">org-roam NO TANGLE</h2>
<div class="outline-text-2" id="text-org1e66392">
<p>
I am setting up org-roam
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">org-roam</span>
  <span style="color: #f78fe7;">:straight</span> t
  <span style="color: #f78fe7;">:init</span>
  (<span style="color: #b6a0ff;">setq</span> org-roam-v2-ack t)
  <span style="color: #f78fe7;">:custom</span>
  (org-roam-directory (file-truename <span style="color: #79a8ff;">"~/org/roam/"</span>))
  <span style="color: #f78fe7;">:bind</span> ((<span style="color: #79a8ff;">"C-c n l"</span> . org-roam-buffer-toggle)
         (<span style="color: #79a8ff;">"C-c n f"</span> . org-roam-node-find)
         (<span style="color: #79a8ff;">"C-c n g"</span> . org-roam-graph)
         (<span style="color: #79a8ff;">"C-c n i"</span> . org-roam-node-insert)
         (<span style="color: #79a8ff;">"C-c n c"</span> . org-roam-capture)
         <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">Dailies</span>
         (<span style="color: #79a8ff;">"C-c n j"</span> . org-roam-dailies-capture-today))
  <span style="color: #f78fe7;">:config</span>
  (org-roam-db-autosync-mode)
  <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">If using org-roam-protocol</span>
  (<span style="color: #b6a0ff;">require</span> '<span style="color: #00bcff;">org-roam-protocol</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org124bac4" class="outline-2">
<h2 id="org124bac4">Obsidian</h2>
<div class="outline-text-2" id="text-org124bac4">
<p>
See  the source repo at <a href="https://github.com/licht1stein/obsidian.el">https://github.com/licht1stein/obsidian.el</a>
To use this package you must define 
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">obsidian-opinonated-directories</span> (base)
  (obsidian-specify-path base)
  (<span style="color: #b6a0ff;">setf</span> obsidian-inbox-directory <span style="color: #79a8ff;">"Inbox"</span>)
  (<span style="color: #b6a0ff;">setf</span> obsidian-daily-notes-directory <span style="color: #79a8ff;">"Daily Notes"</span>)
  (<span style="color: #b6a0ff;">setf</span> obsidian-template-directory <span style="color: #79a8ff;">"Templates"</span>))

(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">obsidian</span>
  <span style="color: #f78fe7;">:straight</span> t
  <span style="color: #f78fe7;">:demand</span> t
  <span style="color: #f78fe7;">:config</span>
  <span style="color: #989898; font-style: italic;">;</span><span style="color: #989898; font-style: italic;">(obsidian-specify-path config-obsidian-specify-path)</span>
  (obsidian-opinonated-directories config-obsidian-specify-path)
  (global-obsidian-mode t)
  <span style="color: #f78fe7;">:bind</span> (<span style="color: #f78fe7;">:map</span> obsidian-mode-map
              <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">Replace C-c C-o with Obsidian.el's implementation. It's ok to use another key binding.</span>
              (<span style="color: #79a8ff;">"C-c C-o"</span> . obsidian-follow-link-at-point)
              <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">Jump to backlinks</span>
              (<span style="color: #79a8ff;">"C-c C-b"</span> . obsidian-backlink-jump)
              <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">If you prefer you can use `</span><span style="color: #00bcff; font-style: italic;">obsidian-insert-link</span><span style="color: #989898; font-style: italic;">'</span>
              (<span style="color: #79a8ff;">"C-c C-l"</span> . obsidian-insert-wikilink)))
</pre>
</div>
</div>
</div>
<div id="outline-container-orga427ff1" class="outline-2">
<h2 id="orga427ff1">Ispell configured with Aspell</h2>
<div class="outline-text-2" id="text-orga427ff1">
<p>
aspell configuration is in <a href="file:///c:/Users/zzzap/.aspell.conf">file:///c:/Users/zzzap/.aspell.conf</a>
Fixed on 7/2/2022 moving to DESKER
<span class="timestamp-wrapper"><span class="timestamp">[2022-10-07 Fri 18:12]</span></span>
</p>
<ul class="org-ul">
<li>The EOL of the .aspell configuration files got corrupted.</li>
<li>They should all be Unix (LF) ends of lines.</li>
</ul>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> ispell-program-name <span style="color: #79a8ff;">"aspell"</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-orga23acd0" class="outline-2">
<h2 id="orga23acd0">JAVA Interface</h2>
<div class="outline-text-2" id="text-orga23acd0">
<p>
Certain tools need java set that location here.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">The java interface assumption is you can execute the program "java"</span>
<span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">There is no jdk to be considered.</span>
(<span style="color: #b6a0ff;">defvar</span> <span style="color: #00d3d0;">java-executable</span> (executable-find <span style="color: #79a8ff;">"java"</span>)
  <span style="color: #9ac8e0; font-style: italic;">"The java-executable to use for java."</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org586abd4" class="outline-2">
<h2 id="org586abd4">Language Tool</h2>
<div class="outline-text-2" id="text-org586abd4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">langtool</span>
  <span style="color: #f78fe7;">:straight</span> t
  <span style="color: #f78fe7;">:config</span>
    (<span style="color: #b6a0ff;">setq</span> langtool-java-bin java-executable)
    (<span style="color: #b6a0ff;">setq</span> langtool-language-tool-jar  <span style="color: #79a8ff;">"c:/Users/Public/Documents/LanguageTool-5.9/languagetool-commandline.jar"</span>)
  <span style="color: #f78fe7;">:bind</span>
    (( <span style="color: #79a8ff;">"\C-x4w"</span> . langtool-check)
     (<span style="color: #79a8ff;">"\C-x4W"</span> . langtool-check-done)
     (<span style="color: #79a8ff;">"\C-x4l"</span> . langtool-switch-default-language)
     (<span style="color: #79a8ff;">"\C-x44"</span> . langtool-show-message-at-point)
     (<span style="color: #79a8ff;">"\C-x4c"</span> . langtool-correct-buffer)))
</pre>
</div>
</div>
</div>
<div id="outline-container-org914be64" class="outline-2">
<h2 id="org914be64">Joining items as strings with and without quoting</h2>
<div class="outline-text-2" id="text-org914be64">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">require</span> '<span style="color: #00bcff;">quoting-tools</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org753de92" class="outline-2">
<h2 id="org753de92">Ensure gnu-tools</h2>
<div class="outline-text-2" id="text-org753de92">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">require</span> '<span style="color: #00bcff;">gnu-tools</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org85b4e5b" class="outline-2">
<h2 id="org85b4e5b">Magit</h2>
<div class="outline-text-2" id="text-org85b4e5b">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">Magit </span>
(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">magit</span>
  <span style="color: #989898; font-style: italic;">;</span><span style="color: #989898; font-style: italic;">:defer 2</span>
  <span style="color: #f78fe7;">:straight</span> t
  <span style="color: #989898; font-style: italic;">;</span><span style="color: #989898; font-style: italic;">:pin melpa</span>
  <span style="color: #f78fe7;">:bind</span>
   ((<span style="color: #79a8ff;">"C-x g"</span> . magit-status)
    (<span style="color: #79a8ff;">"C-x M-d"</span> . magit-dispatch-popup)))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf0c3405" class="outline-2">
<h2 id="orgf0c3405">SSH Agency</h2>
<div class="outline-text-2" id="text-orgf0c3405">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">SSH Agency</span>
(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">ssh-agency</span>
<span style="color: #f78fe7;">:straight</span> t
<span style="color: #f78fe7;">:init</span>
(setenv <span style="color: #79a8ff;">"GIT_ASKPASS"</span> <span style="color: #79a8ff;">"git-gui--askpass"</span>)
(setenv <span style="color: #79a8ff;">"SSH_ASKPASS"</span> <span style="color: #79a8ff;">"git-gui--askpass"</span>)
<span style="color: #f78fe7;">:after</span> (magit))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgcd56324" class="outline-2">
<h2 id="orgcd56324">Roswell</h2>
<div class="outline-text-2" id="text-orgcd56324">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">if</span> (getenv <span style="color: #79a8ff;">"MSYSTEM"</span>)
  (<span style="color: #b6a0ff;">when</span> (file-exists-p (expand-file-name <span style="color: #79a8ff;">"~/.roswell/helper.el"</span>))
    (load (expand-file-name <span style="color: #79a8ff;">"~/.roswell/helper.el"</span>))))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgfae6307" class="outline-2">
<h2 id="orgfae6307">Modus Theme Configuration</h2>
<div class="outline-text-2" id="text-orgfae6307">
<p>
Main Page: <a href="https://protesilaos.com/emacs/modus-themes">https://protesilaos.com/emacs/modus-themes</a>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">modus-themes</span>
  <span style="color: #f78fe7;">:ensure</span> t
  <span style="color: #f78fe7;">:init</span>
  (set-face-attribute 'default nil <span style="color: #f78fe7;">:height</span> 150)
      <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">Subtle red background, red foreground, invisible border</span>

  (<span style="color: #b6a0ff;">setq</span> modus-themes-region '(bg-only))
  (<span style="color: #b6a0ff;">setq</span> modus-themes-paren-match '(bold intense))
  (<span style="color: #b6a0ff;">setq</span> modus-themes-lang-checkers '(background intense))
  (<span style="color: #b6a0ff;">setq</span> modus-themes-italic-constructs t)
  (<span style="color: #b6a0ff;">setq</span> modus-themes-bold-contructs t)
  (<span style="color: #b6a0ff;">setq</span> modus-themes-prompts  '(bold italic))
  <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">Subtle blue background, neutral foreground, intense blue border</span>
  (<span style="color: #b6a0ff;">setq</span> modus-themes-common-palette-overrides
    '((bg-mode-line-active bg-blue-subtle)
      (fg-mode-line-active fg-main)
      (border-mode-line-active blue-intense)))
  (<span style="color: #b6a0ff;">setq</span> modus-themes-mode-line '(accented borderless))
  <span style="color: #989898; font-style: italic;">;;; </span><span style="color: #989898; font-style: italic;">Org Mode</span>
  (<span style="color: #b6a0ff;">setq</span> modus-themes-heading
        `((1 . (rainbow bold intense 2.3))
          (2 . (rainbow bold intense 1.9))
          (3 . (rainbow bold intense 1.7))
          (4 . (rainbow bold intense 1.5))
          (5 . (rainbow bold intense 1.3))
          (6 . (rainbow bold intense 1.1))
          (t . (rainbow bold background 1.0))))
  (<span style="color: #b6a0ff;">setq</span> modus-themes-org-agenda
        '((header-block . (variable-pitch 1.5))
          (header-date . (grayscale workaholic bold-today 1.2))
          (event . (accented italic varied))
          (scheduled . uniform)
          (habit . traffic-light)))
  (<span style="color: #b6a0ff;">setf</span> custom-safe-themes <span style="color: #79a8ff;">"e410458d3e769c33e0865971deb6e8422457fad02bf51f7862fa180ccc42c032"</span>)
  (load-theme 'modus-vivendi t))
</pre>
</div>
</div>
</div>

<div id="outline-container-orge850dfb" class="outline-2">
<h2 id="orge850dfb">Rainbow Delimeters</h2>
<div class="outline-text-2" id="text-orge850dfb">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">rainbow-delimiter</span>
(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">rainbow-delimiters</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org2e488fb" class="outline-2">
<h2 id="org2e488fb">Powershell</h2>
<div class="outline-text-2" id="text-org2e488fb">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">powershell</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">powershell</span>()
  (<span style="color: #b6a0ff;">interactive</span>)
  (<span style="color: #b6a0ff;">let</span> ((explicit-shell-file-name <span style="color: #79a8ff;">"powershell.exe"</span>)
        (explicit-powershell.exe-args '()))
    (shell (generate-new-buffer-name <span style="color: #79a8ff;">"*powershell*"</span>))))
</pre>
</div>
</div>
</div>
<div id="outline-container-org00d7622" class="outline-2">
<h2 id="org00d7622">Shells</h2>
<div class="outline-text-2" id="text-org00d7622">
<p>
[TBD] Decide what is CRUFF here.
I am attempting to use the friendly-shell infrastructure.
</p>

<p>
shell/git-bash works but has prompt problems.
<span class="timestamp-wrapper"><span class="timestamp">[2023-05-19 Fri] </span></span> Stop tangle of this code.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">Set the explicit shell name to msys2 version. </span>
  (<span style="color: #b6a0ff;">setq</span> explicit-shell-file-name <span style="color: #79a8ff;">"c:/devel/msys64/usr/bin/bash"</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org71f2ccd" class="outline-2">
<h2 id="org71f2ccd">Eshell</h2>
<div class="outline-text-2" id="text-org71f2ccd">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">eshell</span>
(setenv  <span style="color: #79a8ff;">"PATH"</span> (concat
                 <span style="color: #79a8ff;">"C:/devel/msys64/ucrt64/bin"</span> <span style="color: #79a8ff;">";"</span>
                 <span style="color: #79a8ff;">"C:/devel/msys64/bin"</span> <span style="color: #79a8ff;">";"</span>
                 (getenv <span style="color: #79a8ff;">"PATH"</span>)))
</pre>
</div>
</div>
</div>
<div id="outline-container-org36dd232" class="outline-2">
<h2 id="org36dd232">Add shell extensions</h2>
<div class="outline-text-2" id="text-org36dd232">
<p>
[TBD] If this is org shell extenstion then put this in org-mode section.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">shx</span>
  <span style="color: #f78fe7;">:straight</span> t)
</pre>
</div>
</div>
</div>
<div id="outline-container-org3e851c5" class="outline-2">
<h2 id="org3e851c5">Tramp</h2>
<div class="outline-text-2" id="text-org3e851c5">
<p>
Make plink the default tramp method if running on Windows when plink.exe exists.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">tramp</span>
  <span style="color: #f78fe7;">:config</span>
    (<span style="color: #b6a0ff;">when</span> (eq  window-system 'w32)
      (<span style="color: #b6a0ff;">setq</span> putty-directory <span style="color: #79a8ff;">"c:/Program Files/PuTTY/"</span>)
      (<span style="color: #b6a0ff;">setq</span> tramp-default-method <span style="color: #79a8ff;">"plink"</span>)
      (<span style="color: #b6a0ff;">when</span> (<span style="color: #b6a0ff;">and</span> (not (string-match putty-directory (getenv <span style="color: #79a8ff;">"PATH"</span>)))
                 (file-directory-p putty-directory))
        (setenv <span style="color: #79a8ff;">"PATH"</span> (concat putty-directory <span style="color: #79a8ff;">";"</span> (getenv <span style="color: #79a8ff;">"PATH"</span>)))
        (add-to-list 'exec-path putty-directory))))
</pre>
</div>
</div>
</div>
<div id="outline-container-org1eb5453" class="outline-2">
<h2 id="org1eb5453">Paredit mode</h2>
<div class="outline-text-2" id="text-org1eb5453">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">paredit</span>
  <span style="color: #f78fe7;">:straight</span> t
  <span style="color: #f78fe7;">:hook</span> (lisp-mode . enable-paredit-mode))
</pre>
</div>
</div>
</div>
<div id="outline-container-org7c4cf9f" class="outline-2">
<h2 id="org7c4cf9f">Common Lisp mode slime or sly</h2>
<div class="outline-text-2" id="text-org7c4cf9f">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defvar</span> <span style="color: #00d3d0;">common-lisp-mode-tool</span> <span style="color: #f78fe7;">:slime</span> <span style="color: #9ac8e0; font-style: italic;">"This can be :slime or :sly."</span>)

</pre>
</div>
</div>
</div>
<div id="outline-container-org82bab44" class="outline-2">
<h2 id="org82bab44">Taging of Inferior Invokers</h2>
<div class="outline-text-2" id="text-org82bab44">
<p>
Create a windows standalone startup for a lisp version.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #b6a0ff;">defvar</span> <span style="color: #00d3d0;">my-lisp-implementations</span> nil
      <span style="color: #9ac8e0; font-style: italic;">"For various implemenations there are lisp invokers for slime and sly."</span>)

  (<span style="color: #b6a0ff;">defmacro</span> <span style="color: #feacd0;">assemble-invoker</span> (my-tag program program-args environment)
     <span style="color: #9ac8e0; font-style: italic;">"The format of a standard slime entry for a lisp implenatation."</span>
     `(list ,my-tag (cons ,program ,program-args) <span style="color: #f78fe7;">:env</span> ,environment))

<span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">[TBD] Replace the assemble invokers with an optional program-args and enviroment </span>
  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">make-lisp-invoker</span> (tag program <span style="color: #6ae4b9;">&amp;optional</span> program-args environment)
    `(,tag ,(cons ,program  ,program-args) ,(<span style="color: #b6a0ff;">if</span> environment (list <span style="color: #f78fe7;">:env</span> environment))))

  (<span style="color: #b6a0ff;">defmacro</span> <span style="color: #feacd0;">assemble-invoker-no-env</span> (my-tag program program-args environment)
    <span style="color: #9ac8e0; font-style: italic;">"The format of a standard slime entry for a lisp implenatation."</span>
    `(list ,my-tag (cons ,program ,program-args)))


  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">collect-this-lisp</span> (lisp-invoker)
      <span style="color: #9ac8e0; font-style: italic;">"Add an specific lisp invoker to slime list"</span>
      (add-to-list 'my-lisp-implementations lisp-invoker))
</pre>
</div>
</div>
</div>

<div id="outline-container-org9c86f38" class="outline-2">
<h2 id="org9c86f38">SBCL  Invoker</h2>
<div class="outline-text-2" id="text-org9c86f38">
<p>
Start all SBCL lisps with a &#x2013;noinform argument and standart arguments.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">The standard options for SBCL</span>
(<span style="color: #b6a0ff;">setq</span> sbcl-program-arguments '(<span style="color: #79a8ff;">"--dynamic-space-size"</span> <span style="color: #79a8ff;">"4000"</span> <span style="color: #79a8ff;">"--noinform"</span>))

(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">assemble-sbcl-enviroment-invoker</span> (my-tag program environment)
  (<span style="color: #b6a0ff;">assemble-invoker</span> my-tag program sbcl-program-arguments environment))
</pre>
</div>

<p>
I collect all sbcl version of lisp from a base directory which is structured
</p>

<ul class="org-ul">
<li>local-config-sbcl-location
<ul class="org-ul">
<li>version
<ul class="org-ul">
<li>name
<ul class="org-ul">
<li>.production  - need to be collected unless name is 'production'</li>
<li>bin</li>
<li>config</li>
<li>lib</li>
</ul></li>
</ul></li>
</ul></li>
</ul>


<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">get-sbcl-versions</span> (base-address)
    <span style="color: #9ac8e0; font-style: italic;">"Get all the directories under the base-address"</span>
    (remove <span style="color: #79a8ff;">"."</span> (remove <span style="color: #79a8ff;">".."</span> (directory-files  base-address ))))

  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">get-sbcl-configs</span> (version-address)
    (remove <span style="color: #79a8ff;">"."</span> (remove <span style="color: #79a8ff;">".."</span> (directory-files version-address))))

  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">assemble-named-sbcl-version</span> (prefix base-address version config)
    <span style="color: #9ac8e0; font-style: italic;">"Create a SBCL invoker for specific compiled version."</span>
    (assemble-sbcl-enviroment-invoker
     (intern (concat prefix version <span style="color: #79a8ff;">"-"</span> config))
     (concat base-address <span style="color: #79a8ff;">"/"</span> version <span style="color: #79a8ff;">"/"</span> config <span style="color: #79a8ff;">"/bin/sbcl.exe"</span>)
     (list (concat <span style="color: #79a8ff;">"SBCL_HOME="</span> base-address <span style="color: #79a8ff;">"/"</span> version <span style="color: #79a8ff;">"/"</span> config <span style="color: #79a8ff;">"/lib/sbcl/"</span>)
           <span style="color: #79a8ff;">"CC=c:/devel/msys64/ucrt64/bin/gcc"</span>)))

(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">augment-versions</span> (vers)
  <span style="color: #9ac8e0; font-style: italic;">"Add the numeric version  pieces to each element."</span>
  (<span style="color: #b6a0ff;">let</span> ((aug-vers 
         (mapcar (<span style="color: #b6a0ff;">lambda</span> (v)
            (cons v (mapcar
                     (<span style="color: #b6a0ff;">lambda</span> (s) (string-to-number s)) (split-string v <span style="color: #79a8ff;">"\\."</span> ))))
                 vers)))
    aug-vers))

 (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">sort-by-nth</span> (n aug-vers)
   <span style="color: #9ac8e0; font-style: italic;">"sort the aug-vers by the nth item"</span>
   (sort aug-vers (<span style="color: #b6a0ff;">lambda</span> (a b) ( &lt; (nth n a) (nth n b)))))

  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">filter-non-versions</span> (l)
    <span style="color: #9ac8e0; font-style: italic;">"Remove any string from the list that container other that 0-9 or ."</span>
    (seq-filter (<span style="color: #b6a0ff;">lambda</span> (a) (not (string-match <span style="color: #79a8ff;">"[</span><span style="color: #ff5f59; font-weight: bold;">^</span><span style="color: #79a8ff;">0-9.]"</span> a))) l))

  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">sort-version</span> (vers)

    (mapcar (<span style="color: #b6a0ff;">lambda</span> (av)  (car av))
            (sort-by-nth 1 (sort-by-nth 2 (sort-by-nth 3 (augment-versions (filter-non-versions vers)))))))





  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">add-win64-sbcl</span> (base-address)
    <span style="color: #9ac8e0; font-style: italic;">"Add a SBCL invoker for all versions under the base-address"</span>
    (<span style="color: #b6a0ff;">let</span> ((versions (sort-version (get-sbcl-versions base-address))))
      (message <span style="color: #79a8ff;">"versions: %s"</span>versions)
      (<span style="color: #b6a0ff;">dolist</span> (version versions)
        (<span style="color: #b6a0ff;">let</span> ((configs (get-sbcl-configs (concat base-address <span style="color: #79a8ff;">"/"</span> version))))
          (<span style="color: #b6a0ff;">dolist</span> (config configs)
            (<span style="color: #b6a0ff;">when</span> (<span style="color: #b6a0ff;">and</span> (file-exists-p (concat base-address <span style="color: #79a8ff;">"/"</span> version <span style="color: #79a8ff;">"/"</span> config  <span style="color: #79a8ff;">"/bin/sbcl.exe"</span>))
                       (<span style="color: #b6a0ff;">or</span> (string= config <span style="color: #79a8ff;">"production"</span>) (file-exists-p (concat base-address <span style="color: #79a8ff;">"/"</span> version <span style="color: #79a8ff;">"/"</span> config <span style="color: #79a8ff;">"/.production"</span>))))
              (collect-this-lisp (assemble-named-sbcl-version <span style="color: #79a8ff;">"sbcl64-"</span> base-address version config))))))))

  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">collect-sbcl</span> ()
    <span style="color: #9ac8e0; font-style: italic;">"Add all the slime invokers for SBCL 64bit compiled versions."</span>
    (<span style="color: #b6a0ff;">checksym-existing-directory</span> <span style="color: #79a8ff;">"local-config-sbcl-location"</span>
              (add-win64-sbcl it)))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf273c8d" class="outline-2">
<h2 id="orgf273c8d">CCL Invokers</h2>
<div class="outline-text-2" id="text-orgf273c8d">
<p>
Clozure Common Lisp from <a href="https://ccl.clozure.com/">https://ccl.clozure.com/</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ccl-invoker</span> (my-tag path)
  <span style="color: #9ac8e0; font-style: italic;">"Return a lisp invoker; nil if path does not exist"</span>
    (<span style="color: #b6a0ff;">when</span> (file-exists-p path)
      `(,my-tag (,path))))

(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">add-ccl</span> ()
  <span style="color: #9ac8e0; font-style: italic;">"Collect any CCL Lisp versions"</span>
  (<span style="color: #b6a0ff;">checksym-existing-file</span> <span style="color: #79a8ff;">"local-config-ccl32-location"</span> (collect-this-lisp (ccl-invoker 'ccl-32 it)))
  (<span style="color: #b6a0ff;">checksym-existing-file</span> <span style="color: #79a8ff;">"local-config-ccl64-location"</span> (collect-this-lisp (ccl-invoker 'ccl-64 it))))    
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf1419ce" class="outline-2">
<h2 id="orgf1419ce">ABCL</h2>
<div class="outline-text-2" id="text-orgf1419ce">
<p>
Supporting the Right to Arm Bears!
</p>

<p>
Armed Bear Common Lisp from  <a href="https://www.abcl.org/doc/abcl-user.html">https://www.abcl.org/doc/abcl-user.html</a>
</p>

<p>
I need to check that there is a java and 
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">invoke-abcl</span>()
  <span style="color: #9ac8e0; font-style: italic;">"Return a lisp invoker; nil if abcl is not found,"</span>
  (<span style="color: #b6a0ff;">let</span> ((abcl local-config-abcl-location))
    (<span style="color: #b6a0ff;">when</span> (file-exists-p abcl)
      `(abcl  ,(list java-executable <span style="color: #79a8ff;">"-jar"</span> abcl)))))

(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">add-abcl</span> ()
  <span style="color: #9ac8e0; font-style: italic;">"Check of abcl implmentations"</span>
  (<span style="color: #b6a0ff;">let</span> ((has-java (<span style="color: #b6a0ff;">checksym-existing-file</span> <span style="color: #79a8ff;">"java-executable"</span> it)))
    (<span style="color: #b6a0ff;">when</span> has-java
      (<span style="color: #b6a0ff;">checksym-existing-file</span> <span style="color: #79a8ff;">"local-config-abcl-location"</span>
                              (collect-this-lisp `(abcl ,(list has-java <span style="color: #79a8ff;">"-jar"</span> it)))))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org7907147" class="outline-2">
<h2 id="org7907147">Collect Lisp Invokers</h2>
<div class="outline-text-2" id="text-org7907147">
<p>
The lisp invokers are slime/sly additions to their implemenations lists.
The collect-lisp-invokers function returns a list of all those invokers for use by slime and sly.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">collect-lisp-invokers</span> ()
    <span style="color: #9ac8e0; font-style: italic;">"collect all lisp-invokers to my-lisp-implementations."</span>
  (<span style="color: #b6a0ff;">setf</span> my-lisp-implementations nil)
  (add-abcl)
  (add-ccl)
  (collect-sbcl)
  my-lisp-implementations)

</pre>
</div>
</div>
</div>
<div id="outline-container-orgf0e0fc2" class="outline-2">
<h2 id="orgf0e0fc2">SLIME</h2>
<div class="outline-text-2" id="text-orgf0e0fc2">
<p>
These are issues about slime.
Many of the things I use for slime acually require slime. This is true for slime-repl-ansi-color
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">slime-repl-ansi-color</span>
<span style="color: #f78fe7;">:straight</span> t
<span style="color: #f78fe7;">:defer</span> t)
</pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">slime</span>
  <span style="color: #f78fe7;">:if</span> (eq common-lisp-mode-tool <span style="color: #f78fe7;">:slime</span>)
  <span style="color: #f78fe7;">:straight</span> t
  <span style="color: #f78fe7;">:config</span>
  (<span style="color: #b6a0ff;">setf</span> slime-lisp-implementations (collect-lisp-invokers))
  (<span style="color: #b6a0ff;">require</span> '<span style="color: #00bcff;">slime-repl-ansi-color</span>)
  (add-hook 'slime-repl-mode-hook
            #'(<span style="color: #b6a0ff;">lambda</span> () (<span style="color: #b6a0ff;">setf</span> slime-repl-ansi-color-mode 1))))
</pre>
</div>
</div>
</div>


<div id="outline-container-orgce72a71" class="outline-2">
<h2 id="orgce72a71">SLY</h2>
<div class="outline-text-2" id="text-orgce72a71">
<p>
SLY is disabled my the :tangle nil in the below items.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">sly-repl-ansi-color</span>
<span style="color: #f78fe7;">:straight</span> t
<span style="color: #f78fe7;">:defer</span> t)
</pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">sly</span>
  <span style="color: #f78fe7;">:disabled</span>
  <span style="color: #f78fe7;">:if</span> (eq common-lisp-mode-tool <span style="color: #f78fe7;">:sly</span>)
  <span style="color: #f78fe7;">:straight</span> t
  <span style="color: #f78fe7;">:defer</span> t
  <span style="color: #f78fe7;">:init</span>
  (<span style="color: #b6a0ff;">setq</span> sly-lisp-implementations (collect-lisp-invokers))
  <span style="color: #f78fe7;">:config</span>
  (<span style="color: #b6a0ff;">require</span> '<span style="color: #00bcff;">sly-repl-ansi-color</span>)
  (<span style="color: #b6a0ff;">push</span> 'sly-repl-ansi-color sly-contribs))
</pre>
</div>
</div>
</div>
<div id="outline-container-org5b85f6c" class="outline-2">
<h2 id="org5b85f6c">Enable lisp-mode .lisp and .asd files</h2>
<div class="outline-text-2" id="text-org5b85f6c">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> auto-mode-alist
      (append '((<span style="color: #79a8ff;">".*\\.asd\\'"</span> . lisp-mode))
              auto-mode-alist))

(<span style="color: #b6a0ff;">setq</span> auto-mode-alist
      (append '((<span style="color: #79a8ff;">".*\\.cl\\'"</span> . lisp-mode))
              auto-mode-alist))
</pre>
</div>
</div>
</div>

<div id="outline-container-org49adfc1" class="outline-2">
<h2 id="org49adfc1">Common Lisp HyperSpec</h2>
<div class="outline-text-2" id="text-org49adfc1">
<p>
I use my local clone of the Hyperspec
</p>
</div>
</div>
<div id="outline-container-orga87b5a3" class="outline-2">
<h2 id="orga87b5a3">Hyperspec Root is loaded from Enviroment location</h2>
<div class="outline-text-2" id="text-orga87b5a3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">when</span> (getenv <span style="color: #79a8ff;">"HyperSpec"</span>)
 (<span style="color: #b6a0ff;">setq</span> common-lisp-hyperspec-root (convert-standard-filename (getenv <span style="color: #79a8ff;">"HyperSpec"</span>))))
</pre>
</div>
</div>
</div>
<div id="outline-container-org82d6b7c" class="outline-2">
<h2 id="org82d6b7c">Pascal Setup</h2>
<div class="outline-text-2" id="text-org82d6b7c">
<p>
[TBD] I have no pascal compiler configured.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'pascal-mode-hook
          (<span style="color: #b6a0ff;">lambda</span> ()
            (set (make-local-variable 'compile-command)
                 (concat <span style="color: #79a8ff;">"fpc "</span> (file-name-nondirectory (buffer-file-name)))))
          t)

(<span style="color: #b6a0ff;">setq</span> auto-mode-alist
      (append '((<span style="color: #79a8ff;">".*\\.pas\\'"</span> . pascal-mode))
              auto-mode-alist))

(<span style="color: #b6a0ff;">setq</span> auto-mode-alist
      (append '((<span style="color: #79a8ff;">".*\\.pp\\'"</span> . pascal-mode))
              auto-mode-alist))

(<span style="color: #b6a0ff;">setq</span> auto-mode-alist
      (append '((<span style="color: #79a8ff;">".*\\.yml\\'"</span> . yaml-mode))
              auto-mode-alist))
</pre>
</div>
</div>
</div>

<div id="outline-container-orga932091" class="outline-2">
<h2 id="orga932091">simple httpd</h2>
<div class="outline-text-2" id="text-orga932091">
<p>
Use simple-httpd to preview a site from emacs.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">simple-httpd</span>
  <span style="color: #f78fe7;">:straight</span> t)
</pre>
</div>
</div>
</div>
<div id="outline-container-org5e9481a" class="outline-2">
<h2 id="org5e9481a">PS Print with GHOSTSCRIPT</h2>
<div class="outline-text-2" id="text-org5e9481a">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">PS Print with GHOSTSCRIPT</span>
  (<span style="color: #b6a0ff;">setq</span> ps-lpr-command <span style="color: #79a8ff;">"C:/Program Files/gs/gs9.56.1/bin/gswin64c.exe"</span>)
  (<span style="color: #b6a0ff;">setq</span> ps-lpr-switches '(<span style="color: #79a8ff;">"-q"</span> <span style="color: #79a8ff;">"-dNOPAUSE"</span> <span style="color: #79a8ff;">"-dBATCH"</span> <span style="color: #79a8ff;">"-sDEVICE=mswinpr2"</span> <span style="color: #79a8ff;">"-sOutputFile=\"%printer%Canon\ TS6000\ series\""</span>))
  (<span style="color: #b6a0ff;">setq</span> ps-printer-name t)
  (<span style="color: #b6a0ff;">setf</span> ps-font-family 'Courier)
  (<span style="color: #b6a0ff;">setf</span> ps-font-size 10.0)
  (<span style="color: #b6a0ff;">setf</span> ps-line-number t)
  (<span style="color: #b6a0ff;">setf</span> ps-line-number-font-size 10)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd746887" class="outline-2">
<h2 id="orgd746887">Emacs Backup Files</h2>
<div class="outline-text-2" id="text-orgd746887">
<p>
;;;; Emacs Backup Files
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> backup-directory-alist `((<span style="color: #79a8ff;">"."</span> . ,(expand-file-name <span style="color: #79a8ff;">"tmp/backups/"</span> user-emacs-directory))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org3ba65ed" class="outline-2">
<h2 id="org3ba65ed">Eshell</h2>
<div class="outline-text-2" id="text-org3ba65ed">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">efs/configure-eshell</span> ()
         <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">Save command history when commands are entered</span>
         (add-hook 'eshell-pre-command-hook 'eshell-save-some-history)

         <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">Truncate buffer for performance</span>
         (add-to-list 'eshell-output-filter-functions 'eshell-truncate-buffer)

         (<span style="color: #b6a0ff;">setq</span> eshell-history-size         10000
               eshell-buffer-maximum-lines 10000
               eshell-hist-ignoredups t
               eshell-scroll-to-bottom-on-input t))

(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">eshell</span>
         <span style="color: #f78fe7;">:hook</span> (eshell-first-time-mode . efs/configure-eshell))

(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">eshell-git-prompt</span>
  <span style="color: #f78fe7;">:straight</span> t
  <span style="color: #f78fe7;">:config</span>
    (eshell-git-prompt-use-theme 'powerline))
</pre>
</div>
</div>
</div>
<div id="outline-container-org3eafee1" class="outline-2">
<h2 id="org3eafee1">Dired</h2>
<div class="outline-text-2" id="text-org3eafee1">
<ul class="org-ul">
<li>dired is configured as a file manager.</li>
</ul>
</div>
<div id="outline-container-orgc587434" class="outline-3">
<h3 id="orgc587434">dired hook</h3>
<div class="outline-text-3" id="text-orgc587434">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">dired</span>
  <span style="color: #f78fe7;">:straight</span> nil
  <span style="color: #f78fe7;">:config</span>
    (add-hook 'dired-mode-hook 'all-the-icons-dired-mode))

</pre>
</div>
</div>
</div>
<div id="outline-container-org4717aa0" class="outline-3">
<h3 id="org4717aa0">Single Dired buffer</h3>
<div class="outline-text-3" id="text-org4717aa0">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">dired-single</span>
  <span style="color: #f78fe7;">:straight</span> nil
  <span style="color: #f78fe7;">:after</span>
    dired
  <span style="color: #f78fe7;">:config</span>
    (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">twr/dired-init</span> ()
      (define-key dired-mode-map [remap dired-find-file]
        'dired-single-buffer)
      (define-key dired-mode-map [remap dired-mouse-find-file-other-window]
        'dired-single-buffer-mouse)
      (define-key dired-mode-map [remap dired-up-directory]
        'dired-single-up-directory))
    (twr/dired-init)
    (<span style="color: #b6a0ff;">setq</span> dired-single-use-magic-buffer t)
    <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">F5 is my special key</span>
    (global-set-key [(f5)] 'dired-single-magic-buffer)
    (global-set-key [(control f5)] (<span style="color: #b6a0ff;">function</span>
      (<span style="color: #b6a0ff;">lambda</span> nil (<span style="color: #b6a0ff;">interactive</span>)
        (dired-single-magic-buffer default-directory))))
    (global-set-key [(shift f5)] (<span style="color: #b6a0ff;">function</span>
      (<span style="color: #b6a0ff;">lambda</span> nil (<span style="color: #b6a0ff;">interactive</span>)
        (message <span style="color: #79a8ff;">"Current directory is: %s"</span> default-directory))))
    (global-set-key [(meta f5)] 'dired-single-toggle-buffer-name))
</pre>
</div>
</div>
</div>
<div id="outline-container-org7639557" class="outline-3">
<h3 id="org7639557">All the icons</h3>
<div class="outline-text-3" id="text-org7639557">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">all-the-icons-dired</span>
      <span style="color: #f78fe7;">:straight</span> t
      <span style="color: #f78fe7;">:after</span> dired
      <span style="color: #989898; font-style: italic;">;</span><span style="color: #989898; font-style: italic;">:pin melpa</span>
      <span style="color: #f78fe7;">:config</span>
      (add-hook 'dired-mode-hook 'all-the-icons-dired-mode))
</pre>
</div>
</div>
</div>
<div id="outline-container-org667e30d" class="outline-3">
<h3 id="org667e30d">File Sort Order</h3>
<div class="outline-text-3" id="text-org667e30d">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">mydired-sort</span> ()
        <span style="color: #9ac8e0; font-style: italic;">"Sort dired listings with directories first."</span>
        (<span style="color: #b6a0ff;">save-excursion</span>
          (<span style="color: #b6a0ff;">let</span> (buffer-read-only)
            (forward-line 2) <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">beyond dir. header </span>
            (sort-regexp-fields t <span style="color: #79a8ff;">"^.*$"</span> <span style="color: #79a8ff;">"[ ]*."</span> (point) (point-max)))
          (set-buffer-modified-p nil)))

(<span style="color: #b6a0ff;">defadvice</span> <span style="color: #feacd0;">dired-readin</span>
        (after dired-after-updating-hook first () activate)
        <span style="color: #9ac8e0; font-style: italic;">"Sort dired listings with directories first before adding marks."</span>
        (mydired-sort))
</pre>
</div>
</div>
</div>
<div id="outline-container-org986febd" class="outline-3">
<h3 id="org986febd">diredc - NOT TANGLED</h3>
<div class="outline-text-3" id="text-org986febd">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">diredc</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org7c5a5ba" class="outline-3">
<h3 id="org7c5a5ba">Peep Dired - NOT TANGLED</h3>
<div class="outline-text-3" id="text-org7c5a5ba">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">peep-dired</span>
<span style="color: #f78fe7;">:config</span>
<span style="color: #989898; font-style: italic;">; </span><span style="color: #989898; font-style: italic;">kill buffers when diabling the mode</span>
(<span style="color: #b6a0ff;">setq</span> peep-dired-cleanup-on-disable t)
<span style="color: #989898; font-style: italic;">; </span><span style="color: #989898; font-style: italic;">kill buffers when you move to another</span>
(<span style="color: #b6a0ff;">setq</span> peep-direct-cleanup-on eagerly t)
<span style="color: #989898; font-style: italic;">; </span><span style="color: #989898; font-style: italic;">set mode for peeped buffers</span>
(<span style="color: #b6a0ff;">setq</span> peep-dired-enable-on-directories t)
<span style="color: #989898; font-style: italic;">; </span><span style="color: #989898; font-style: italic;">file  types not to open</span>
(<span style="color: #b6a0ff;">setq</span> peep-dired-ignored-extensions '(<span style="color: #79a8ff;">"mkv"</span> <span style="color: #79a8ff;">"iso"</span> <span style="color: #79a8ff;">"mp4"</span>))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org6c16ae7" class="outline-2">
<h2 id="org6c16ae7">Mastodon</h2>
<div class="outline-text-2" id="text-org6c16ae7">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">mastodon</span>
  (<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">mastodon</span>
    <span style="color: #f78fe7;">:straight</span> t)
  (<span style="color: #b6a0ff;">setq</span> mastodon-active-user <span style="color: #79a8ff;">"tomrake"</span>)
  (<span style="color: #b6a0ff;">setq</span> mastodon-instance-url <span style="color: #79a8ff;">"https://mastodon.social"</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org562482f" class="outline-2">
<h2 id="org562482f">Openwith</h2>
<div class="outline-text-2" id="text-org562482f">
<p>
NOTE:
On Windows 11, this only opens the file by the Windows extension
So configure it there.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #b6a0ff;">when</span> (<span style="color: #b6a0ff;">require</span> '<span style="color: #00bcff;">openwith</span> nil 'noerror)

     (<span style="color: #b6a0ff;">setq</span> openwith-associatsions
         (list (list (openwith-make-extension-regexp '(<span style="color: #79a8ff;">"mpg"</span> <span style="color: #79a8ff;">"mpeg"</span> <span style="color: #79a8ff;">"mp3"</span> <span style="color: #79a8ff;">"mp4"</span>
                                              <span style="color: #79a8ff;">"avi"</span> <span style="color: #79a8ff;">"wmv"</span> <span style="color: #79a8ff;">"wav"</span> <span style="color: #79a8ff;">"mov"</span> <span style="color: #79a8ff;">"flv"</span>
                                              <span style="color: #79a8ff;">"ogm"</span> <span style="color: #79a8ff;">"ogg"</span> <span style="color: #79a8ff;">"mkv"</span>)) <span style="color: #fec43f;">"vlc.exe"</span><span style="color: #fec43f;">)</span>
               (list (openwith-make-extension-regexp '(<span style="color: #79a8ff;">"JPEG"</span> <span style="color: #79a8ff;">"JPG"</span>))
                     <span style="color: #79a8ff;">"c:/Program Files (x86)/JPEGView/JPEGView.exe"</span> '(file))))
<span style="color: #989898; font-style: italic;">;;    </span><span style="color: #989898; font-style: italic;">(message "OPENWITH CONFIG")</span>
<span style="color: #989898; font-style: italic;">;;    </span><span style="color: #989898; font-style: italic;">(message openwith-associatsions)</span>
    (openwith-mode 1))
</pre>
</div>
</div>
</div>
<div id="outline-container-org98a58fa" class="outline-2">
<h2 id="org98a58fa">Recentf</h2>
<div class="outline-text-2" id="text-org98a58fa">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">require</span> '<span style="color: #00bcff;">recentf</span>)
(recentf-mode 1)
(<span style="color: #b6a0ff;">setq</span> recentf-max-menu-items 25)
(global-set-key <span style="color: #79a8ff;">"\C-x\ \C-r"</span> 'recentf-open-files)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgddc660f" class="outline-2">
<h2 id="orgddc660f">PDF-TOOLS</h2>
<div class="outline-text-2" id="text-orgddc660f">
<p>
org-noter hangs on msys2 launch
I am not tangleing this to see of msys2 launch is sucessful.
I remove noter loading, tangle again.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">pdf-tools</span>
   <span style="color: #f78fe7;">:config</span>
   <span style="color: #989898; font-style: italic;">;</span><span style="color: #989898; font-style: italic;">(pdf-tools-install))</span>

(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">org-pdftools</span>
  <span style="color: #f78fe7;">:hook</span> (org-mode . org-pdftools-setup-link))
</pre>
</div>
</div>
</div>
<div id="outline-container-org270ecef" class="outline-2">
<h2 id="org270ecef">PPL Time of Day</h2>
<div class="outline-text-2" id="text-org270ecef">
<div class="org-src-container">
<pre class="src src-emacs-lisp"> (<span style="color: #b6a0ff;">setq</span> ppl-holiday-table <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">'(2023                                      ;year</span>
 <span style="color: #989898; font-style: italic;">;;   </span><span style="color: #989898; font-style: italic;">(1 1)                                     ;new years day</span>
 <span style="color: #989898; font-style: italic;">;;   </span><span style="color: #989898; font-style: italic;">(2 20)                            ;presidents day</span>
 <span style="color: #989898; font-style: italic;">;;   </span><span style="color: #989898; font-style: italic;">(4 7)                                     ; Good Friday</span>
 <span style="color: #989898; font-style: italic;">;;   </span><span style="color: #989898; font-style: italic;">(5 29)                            ; Memorial Day</span>
 <span style="color: #989898; font-style: italic;">;;   </span><span style="color: #989898; font-style: italic;">(7 4)                                     ; Independence Day</span>
 <span style="color: #989898; font-style: italic;">;;   </span><span style="color: #989898; font-style: italic;">(9 4)                                     ; Labor Day</span>
 <span style="color: #989898; font-style: italic;">;;   </span><span style="color: #989898; font-style: italic;">(11 24)                           ; Thanksgiving</span>
 <span style="color: #989898; font-style: italic;">;;   </span><span style="color: #989898; font-style: italic;">(11 25)                           ; Next Day</span>
 <span style="color: #989898; font-style: italic;">;;   </span><span style="color: #989898; font-style: italic;">(12 24)                           ; Christmas Eve</span>
 <span style="color: #989898; font-style: italic;">;;   </span><span style="color: #989898; font-style: italic;">(12 25))</span>
 '(2024                                 <span style="color: #989898; font-style: italic;">;</span><span style="color: #989898; font-style: italic;">year</span>
  (1 1)                                 <span style="color: #989898; font-style: italic;">;</span><span style="color: #989898; font-style: italic;">new years day</span>
 (2 19)                         <span style="color: #989898; font-style: italic;">;</span><span style="color: #989898; font-style: italic;">presidents day</span>
 (3 29)                                 <span style="color: #989898; font-style: italic;">; </span><span style="color: #989898; font-style: italic;">Good Friday</span>
 (5 27)                         <span style="color: #989898; font-style: italic;">; </span><span style="color: #989898; font-style: italic;">Memorial Day</span>
 (7 4)                                  <span style="color: #989898; font-style: italic;">; </span><span style="color: #989898; font-style: italic;">Independence Day</span>
 (9 2)                                  <span style="color: #989898; font-style: italic;">; </span><span style="color: #989898; font-style: italic;">Labor Day</span>
 (11 28)                                <span style="color: #989898; font-style: italic;">; </span><span style="color: #989898; font-style: italic;">Thanksgiving</span>
 (11 29)                                <span style="color: #989898; font-style: italic;">; </span><span style="color: #989898; font-style: italic;">Next Day</span>
 (12 24)                                <span style="color: #989898; font-style: italic;">; </span><span style="color: #989898; font-style: italic;">Christmas Eve</span>
 (12 25)))                              <span style="color: #989898; font-style: italic;">; </span><span style="color: #989898; font-style: italic;">Christmas</span>


  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">is-holiday</span> (dt table)
    <span style="color: #9ac8e0; font-style: italic;">"Check if a date is a holiday"</span>
    (<span style="color: #b6a0ff;">if</span> table (<span style="color: #b6a0ff;">or</span> (<span style="color: #b6a0ff;">and</span> (= (nth 4 dt) (nth 0 (car table)))
                       (= (nth 3 dt) (nth 1 (car table))))
                  (is-holiday dt (cdr table)))))

  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">is-ppl-holiday</span> (dt)
    <span style="color: #9ac8e0; font-style: italic;">"Check if a date is a PPL holiday"</span>
    (<span style="color: #b6a0ff;">if</span> (/= (car ppl-holiday-table) (nth 5 dt)) 
        (<span style="color: #fec43f;">error</span> <span style="color: #79a8ff;">"Update Date table"</span>) 
        (is-holiday dt (cdr ppl-holiday-table))))

  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ppl-summer</span> (dt)
    <span style="color: #9ac8e0; font-style: italic;">"Check if a date is PPL summer rate"</span>
    (&lt; 5 (nth 4 dt) 12))

(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">ppl-high-rate</span> (<span style="color: #6ae4b9;">&amp;optional</span> dt)
  <span style="color: #9ac8e0; font-style: italic;">"Check if a date and time are at PPL high rate"</span>
  (<span style="color: #b6a0ff;">unless</span> dt (<span style="color: #b6a0ff;">setq</span> dt (decode-time)))
       (<span style="color: #b6a0ff;">cond</span> ((not (&lt; 0 (nth 6 dt) 6))  nil)
             ((is-ppl-holiday dt)  nil)
             ((ppl-summer dt)  (&lt;= 14 (nth 2 dt) 17))
              (t  ( &lt;= 16 (nth 2 dt) 19))))

</pre>
</div>
</div>
</div>
<div id="outline-container-org83cb1dd" class="outline-2">
<h2 id="org83cb1dd">YAML Mode</h2>
<div class="outline-text-2" id="text-org83cb1dd">
<p>
Add yaml mode
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">yaml-mode</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc8f2278" class="outline-2">
<h2 id="orgc8f2278">JSON to Single line</h2>
<div class="outline-text-2" id="text-orgc8f2278">
<p>
This was found on <a href="https://stackoverflow.com/questions/39861580/emacs-program-to-collapse-json-to-single-line">https://stackoverflow.com/questions/39861580/emacs-program-to-collapse-json-to-single-line</a> and is Justin Schell response.
</p>

<p>
I am using to add icons to the icons.json file derived from feathericons.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">json-to-single-line</span> (beg end)
  <span style="color: #9ac8e0; font-style: italic;">"Collapse prettified json in region between BEG and END to a single line"</span>
  (<span style="color: #b6a0ff;">interactive</span> <span style="color: #79a8ff;">"r"</span>)
  (<span style="color: #b6a0ff;">if</span> (use-region-p)
      (<span style="color: #b6a0ff;">save-excursion</span>
        (<span style="color: #b6a0ff;">save-restriction</span>
          (narrow-to-region beg end)
          (goto-char (point-min))
          (<span style="color: #b6a0ff;">while</span> (re-search-forward <span style="color: #79a8ff;">"[[:space:]\n]+"</span> nil t)
            (replace-match <span style="color: #79a8ff;">" "</span>))))
    (print <span style="color: #79a8ff;">"This function operates on a region"</span>)))
</pre>
</div>
</div>
</div>
<div id="outline-container-org10fb64f" class="outline-2">
<h2 id="org10fb64f">load per user settings</h2>
<div class="outline-text-2" id="text-org10fb64f">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">Various user settings is a local configuration.</span>
(<span style="color: #b6a0ff;">local-custom-file</span> <span style="color: #79a8ff;">"local-settings.org"</span> <span style="color: #79a8ff;">"Final user settings"</span>)
</pre>
</div>
</div>
</div>


<div id="outline-container-org0ccf3b9" class="outline-2">
<h2 id="org0ccf3b9">Sourcing of Scripts</h2>
<div class="outline-text-2" id="text-org0ccf3b9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">require</span> '<span style="color: #00bcff;">filename2clipboard</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgcc6409c" class="outline-2">
<h2 id="orgcc6409c">ERC</h2>
<div class="outline-text-2" id="text-orgcc6409c">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">erc</span>
    <span style="color: #f78fe7;">:straight</span> t
    <span style="color: #f78fe7;">:config</span>
    (<span style="color: #b6a0ff;">setq</span> erc-fill-column 120
      erc-fill-function 'erc-fill-static
      erc-fill-static-center 20))

(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">erc-hl-nicks</span>
  <span style="color: #f78fe7;">:straight</span> t
  <span style="color: #f78fe7;">:after</span> erc
  <span style="color: #f78fe7;">:config</span>
  (add-to-list 'erc-modules 'hl-nicks))

(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">erc-hl-nicks</span>
  <span style="color: #f78fe7;">:straight</span> t
  <span style="color: #f78fe7;">:after</span> erc
  <span style="color: #f78fe7;">:config</span>
  (add-to-list 'erc-modules 'hl-nicks))

(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">emojify</span>
  <span style="color: #f78fe7;">:straight</span> t
  <span style="color: #f78fe7;">:hook</span> (erc-mode . emojify-mode)
  <span style="color: #f78fe7;">:commands</span> emojify-mode)

</pre>
</div>
</div>
</div>
<div id="outline-container-orge82ee93" class="outline-2">
<h2 id="orge82ee93">org-publish</h2>
<div class="outline-text-2" id="text-orge82ee93">
<p>
Tom Rake's Notes
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">require</span> '<span style="color: #00bcff;">ox-publish</span>)

(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">dual-org-data</span> (name org-part data-part common-part)
  <span style="color: #9ac8e0; font-style: italic;">"Creates a name publishing project with org files and data files in the same directory."</span>
  `((,(concat name <span style="color: #79a8ff;">"-text"</span>)  ,@common-part ,@org-part)
    (,(concat name <span style="color: #79a8ff;">"-data"</span>)  ,@common-part ,@data-part)
    (,name <span style="color: #f78fe7;">:components</span> (,(concat name <span style="color: #79a8ff;">"-text"</span>) ,(concat name <span style="color: #79a8ff;">"-data"</span>)))))


(<span style="color: #b6a0ff;">setq</span> org-publish-project-alist
      `(
        ,@(dual-org-data      <span style="color: #79a8ff;">"org-web"</span> '(
         <span style="color: #f78fe7;">:base-extension</span> <span style="color: #79a8ff;">"org"</span>
         <span style="color: #f78fe7;">:publishing-function</span> org-html-publish-to-html
         <span style="color: #f78fe7;">:headline-levels</span> 4             <span style="color: #989898; font-style: italic;">; </span><span style="color: #989898; font-style: italic;">Just the default for this project.</span>
         <span style="color: #f78fe7;">:auto-preamble</span> t
         <span style="color: #f78fe7;">:auto-sitemap</span> t
         <span style="color: #f78fe7;">:section-numbers</span> nil
         <span style="color: #f78fe7;">:makeindex</span> t)
         '(
         <span style="color: #f78fe7;">:base-extension</span> <span style="color: #79a8ff;">"css</span><span style="color: #feacd0;">\\</span><span style="color: #00c06f;">|</span><span style="color: #79a8ff;">js</span><span style="color: #feacd0;">\\</span><span style="color: #00c06f;">|</span><span style="color: #79a8ff;">png</span><span style="color: #feacd0;">\\</span><span style="color: #00c06f;">|</span><span style="color: #79a8ff;">jpg</span><span style="color: #feacd0;">\\</span><span style="color: #00c06f;">|</span><span style="color: #79a8ff;">gif</span><span style="color: #feacd0;">\\</span><span style="color: #00c06f;">|</span><span style="color: #79a8ff;">pdf</span><span style="color: #feacd0;">\\</span><span style="color: #00c06f;">|</span><span style="color: #79a8ff;">mp3</span><span style="color: #feacd0;">\\</span><span style="color: #00c06f;">|</span><span style="color: #79a8ff;">ogg</span><span style="color: #feacd0;">\\</span><span style="color: #00c06f;">|</span><span style="color: #79a8ff;">swf"</span>
         <span style="color: #f78fe7;">:auto-sitemap</span> nil
         <span style="color: #f78fe7;">:publishing-function</span> org-publish-attachment)
         '(<span style="color: #f78fe7;">:base-directory</span> <span style="color: #79a8ff;">"~/Documents/Code/org-web/content"</span>
                            <span style="color: #f78fe7;">:publishing-directory</span> <span style="color: #79a8ff;">"c:/Users/Public/org-web"</span>
                           <span style="color: #f78fe7;">:recursive</span> t
                           <span style="color: #f78fe7;">:exclude</span> <span style="color: #79a8ff;">".*/</span><span style="color: #fec43f;">\</span><span style="color: #79a8ff;">.git/.*|.*/.*~"</span>
                           ))
        (<span style="color: #79a8ff;">"blog-src"</span>
         <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">Path to org files.</span>
         <span style="color: #f78fe7;">:base-directory</span> <span style="color: #79a8ff;">"~/Documents/Code/blog/org-source"</span>
         <span style="color: #f78fe7;">:base-extension</span> <span style="color: #79a8ff;">"org"</span>

         <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">Path to Jekyll Posts</span>
         <span style="color: #f78fe7;">:publishing-directory</span> <span style="color: #79a8ff;">"~/Documents/Code/blog/tomrake.github.io/_drafts/"</span>
         <span style="color: #f78fe7;">:recursive</span> t
         <span style="color: #f78fe7;">:publishing-function</span> org-html-publish-to-html
         <span style="color: #f78fe7;">:headline-levels</span> 4
         <span style="color: #f78fe7;">:html-extension</span> <span style="color: #79a8ff;">"html"</span>
         <span style="color: #f78fe7;">:body-only</span> t)
        (<span style="color: #79a8ff;">"blog"</span> <span style="color: #f78fe7;">:components</span> (<span style="color: #79a8ff;">"blog-src"</span>))))
</pre>
</div>
</div>
</div>


<div id="outline-container-org33fd9bd" class="outline-2">
<h2 id="org33fd9bd">Org Mode</h2>
<div class="outline-text-2" id="text-org33fd9bd">
<p>
This is a large use-package config statement for org.
</p>
</div>

<div id="outline-container-org5d683bb" class="outline-3">
<h3 id="org5d683bb">&lt;&lt; The Open  ( use-package for org</h3>
<div class="outline-text-3" id="text-org5d683bb">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">org</span>
  <span style="color: #f78fe7;">:straight</span> (<span style="color: #f78fe7;">:type</span> built-in)
  <span style="color: #f78fe7;">:config</span>
</pre>
</div>

<p>
Note that all items between the open and the close are added to the config.
</p>
</div>
</div>

<div id="outline-container-org9482ee9" class="outline-3">
<h3 id="org9482ee9">Ensure there are standard user ~/org directories</h3>
<div class="outline-text-3" id="text-org9482ee9">
<p>
There need to be an org directory to place certain org files.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">Create stadard org directories if not already present.</span>
<span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">The standard user directory is ~/Documents/org .</span>
(message <span style="color: #79a8ff;">"!!!! DO NOT CREATE org directories!!!"</span>)
<span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">(checksym-defined "local-config-org-user-dir"</span>
<span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">               (defvar org-user-dir it "The base of org user files.")</span>
<span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">               (unless (file-directory-p org-user-dir)</span>
<span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">                 (make-directory  org-user-dir)))</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org3b803a3" class="outline-3">
<h3 id="org3b803a3">The exact form of org files largely from this file Emacs.org</h3>
<div class="outline-text-3" id="text-org3b803a3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">org-bullets</span>
  <span style="color: #f78fe7;">:after</span> org
  <span style="color: #f78fe7;">:hook</span> (org-mode . org-bullets-mode)
  <span style="color: #f78fe7;">:custom</span>
  (org-bullets-bullet-list '(<span style="color: #79a8ff;">"&#9673;"</span> <span style="color: #79a8ff;">"&#9675;"</span> <span style="color: #79a8ff;">"&#9679;"</span> <span style="color: #79a8ff;">"&#9675;"</span> <span style="color: #79a8ff;">"&#9679;"</span> <span style="color: #79a8ff;">"&#9675;"</span> <span style="color: #79a8ff;">"&#9679;"</span>)))

<span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">Replace list hyphen with dot</span>
(font-lock-add-keywords 'org-mode
                        '((<span style="color: #79a8ff;">"^ *</span><span style="color: #feacd0;">\\</span><span style="color: #00c06f;">(</span><span style="color: #79a8ff;">[-]</span><span style="color: #feacd0;">\\</span><span style="color: #00c06f;">)</span><span style="color: #79a8ff;"> "</span>
                          (0 (<span style="color: #b6a0ff;">prog1</span> () (compose-region (match-beginning 1) (match-end 1) <span style="color: #79a8ff;">"&#8226;"</span>))))))

(<span style="color: #b6a0ff;">dolist</span> (face '((org-level-1 . 1.2)
                (org-level-2 . 1.1)
                (org-level-3 . 1.05)
                (org-level-4 . 1.0)
                (org-level-5 . 1.1)
                (org-level-6 . 1.1)
                (org-level-7 . 1.1)
                (org-level-8 . 1.1)))
    (set-face-attribute (car face) nil <span style="color: #f78fe7;">:font</span> <span style="color: #79a8ff;">"Cantarell"</span> <span style="color: #f78fe7;">:weight</span> 'regular <span style="color: #f78fe7;">:height</span> (cdr face)))

<span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">Make sure org-indent face is available</span>
(<span style="color: #b6a0ff;">require</span> '<span style="color: #00bcff;">org-indent</span>)

<span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">Ensure that anything that should be fixed-pitch in Org files appears that way</span>
(set-face-attribute 'org-block nil <span style="color: #f78fe7;">:foreground</span> nil <span style="color: #f78fe7;">:inherit</span> 'fixed-pitch)
(set-face-attribute 'org-code nil   <span style="color: #f78fe7;">:inherit</span> '(shadow fixed-pitch))
(set-face-attribute 'org-indent nil <span style="color: #f78fe7;">:inherit</span> '(org-hide fixed-pitch))
(set-face-attribute 'org-verbatim nil <span style="color: #f78fe7;">:inherit</span> '(shadow fixed-pitch))
(set-face-attribute 'org-special-keyword nil <span style="color: #f78fe7;">:inherit</span> '(font-lock-comment-face fixed-pitch))
(set-face-attribute 'org-meta-line nil <span style="color: #f78fe7;">:inherit</span> '(font-lock-comment-face fixed-pitch))
(set-face-attribute 'org-checkbox nil <span style="color: #f78fe7;">:inherit</span> 'fixed-pitch)
</pre>
</div>
</div>
</div>
<div id="outline-container-org7ebc797" class="outline-3">
<h3 id="org7ebc797">Org Key Binding</h3>
<div class="outline-text-3" id="text-org7ebc797">
<p>
These are standard keybindings. I use agenda and capture.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">Org Mode key bindings.</span>
(global-set-key (kbd <span style="color: #79a8ff;">"C-c l"</span>) 'org-store-link)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c a"</span>) 'org-agenda)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c c"</span>) 'org-capture)
(global-set-key (kbd <span style="color: #79a8ff;">"C-c b"</span>) 'org-switchb)
</pre>
</div>
</div>
</div>

<div id="outline-container-org8685f11" class="outline-3">
<h3 id="org8685f11">Make tab act natively in org source blocks</h3>
<div class="outline-text-3" id="text-org8685f11">
<p>
When editing code blocks I like this.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> org-src-tab-acts-natively t)
</pre>
</div>
</div>
</div>
<div id="outline-container-orge39573c" class="outline-3">
<h3 id="orge39573c">Configure org-export</h3>
<div class="outline-text-3" id="text-orge39573c">
<p>
This is how I generally like org files exported.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">org-export with no TOC, no NUM and no SUB/SUPERSCRIPTS</span>
(<span style="color: #b6a0ff;">setf</span> org-export-with-toc nil)
(<span style="color: #b6a0ff;">setf</span> org-export-with-section-numbers nil)
(<span style="color: #b6a0ff;">setf</span> org-export-with-sub-superscripts nil)
</pre>
</div>
</div>
</div>
<div id="outline-container-org1f96bda" class="outline-3">
<h3 id="org1f96bda">Org Structure Templates</h3>
<div class="outline-text-3" id="text-org1f96bda">
<p>
Small editing short cuts I use &lt;sh and &lt;el a lot.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">require</span> '<span style="color: #00bcff;">org-tempo</span>)
(add-to-list 'org-structure-template-alist '(<span style="color: #79a8ff;">"sh"</span> . <span style="color: #79a8ff;">"src shell"</span>))
(add-to-list 'org-structure-template-alist '(<span style="color: #79a8ff;">"el"</span> . <span style="color: #79a8ff;">"src emacs-lisp"</span>))
(add-to-list 'org-structure-template-alist '(<span style="color: #79a8ff;">"qb"</span> . <span style="color: #79a8ff;">"quote"</span>))
</pre>
</div>
</div>
</div>
<div id="outline-container-org325854b" class="outline-3">
<h3 id="org325854b">killing frame for org-protcol capture</h3>
<div class="outline-text-3" id="text-org325854b">
<p>
I have no idea why I have this. [TBD] test with and without and evaluate.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">Kill the frame if one was created for the capture</span>
(<span style="color: #b6a0ff;">defvar</span> <span style="color: #00d3d0;">kk/delete-frame-after-capture</span> 0 <span style="color: #9ac8e0; font-style: italic;">"Whether to delete the last frame after the current capture"</span>)

(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">kk/delete-frame-if-neccessary</span> (<span style="color: #6ae4b9;">&amp;rest</span> r)
  (<span style="color: #b6a0ff;">cond</span>
   ((= kk/delete-frame-after-capture 0) nil)
   ((&gt; kk/delete-frame-after-capture 1)
    (<span style="color: #b6a0ff;">setq</span> kk/delete-frame-after-capture (- kk/delete-frame-after-capture 1)))
   (t
    (<span style="color: #b6a0ff;">setq</span> kk/delete-frame-after-capture 0)
    (delete-frame))))

(advice-add 'org-capture-finalize <span style="color: #f78fe7;">:after</span> 'kk/delete-frame-if-neccessary)
(advice-add 'org-capture-kill <span style="color: #f78fe7;">:after</span> 'kk/delete-frame-if-neccessary)
(advice-add 'org-capture-refile <span style="color: #f78fe7;">:after</span> 'kk/delete-frame-if-neccessary)
</pre>
</div>
</div>
</div>

<div id="outline-container-org0793e7e" class="outline-3">
<h3 id="org0793e7e">org-present</h3>
<div class="outline-text-3" id="text-org0793e7e">
<p>
A mode to show org files as a presentation.
</p>

<ul class="org-ul">
<li>M-x org-present       - to enter mode</li>
<li>M-x org-present-quit  - to turn off mode.</li>
</ul>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">org-present</span>
  <span style="color: #f78fe7;">:straight</span> t
  <span style="color: #f78fe7;">:config</span>
    (<span style="color: #b6a0ff;">use-package</span> <span style="color: #00bcff;">visual-fill-column</span>
      <span style="color: #f78fe7;">:straight</span> t
      <span style="color: #f78fe7;">:config</span>
      (<span style="color: #b6a0ff;">setq</span> visual-fill-column-width 110
            visual-fill-column-center-text t)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd6a41d4" class="outline-3">
<h3 id="orgd6a41d4">org mode add :shcmd to sh blocks</h3>
<div class="outline-text-3" id="text-orgd6a41d4">
<p>
Allow formating of various shell types.
</p>

<ul class="org-ul">
<li>Using :shcmd "cmdproxy.exe" on Windows uses the emacs version of cmd.</li>
<li>Using :shcmd   msys2-base / "bin/bash.exe" will run a shell under msys2 bash.</li>
<li>Allow Windows CMD commands to be run from .org files.</li>

<li>See <a href="https://emacs.stackexchange.com/questions/19037/org-babel-invoking-cmd-exe">https://emacs.stackexchange.com/questions/19037/org-babel-invoking-cmd-exe</a></li>

<li>Example how to use, note "cmdproxy.exe" is a Windows Emacs file.</li>
</ul>
<pre class="example" id="org06e1fb2">
\#+BEGIN_SRC sh :shcmd "cmdproxy.exe"
dir
\#+END_SRC
</pre>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">Add Windows cmdproxy  </span>
  (<span style="color: #b6a0ff;">require</span> '<span style="color: #00bcff;">ob-shell</span>)
  (<span style="color: #b6a0ff;">defadvice</span> <span style="color: #feacd0;">org-babel-sh-evaluate</span> (around set-shell activate)
    <span style="color: #9ac8e0; font-style: italic;">"Add header argument :shcmd that determines the shell to be called."</span>
    (<span style="color: #b6a0ff;">defvar</span> <span style="color: #00d3d0;">org-babel-sh-command</span>)
    (<span style="color: #b6a0ff;">let*</span> ((org-babel-sh-command (<span style="color: #b6a0ff;">or</span> (cdr (assoc <span style="color: #f78fe7;">:shcmd</span> params)) org-babel-sh-command)))
      ad-do-it))
</pre>
</div>
</div>
</div>
<div id="outline-container-orga3b56cb" class="outline-3">
<h3 id="orga3b56cb">Add web image links</h3>
<div class="outline-text-3" id="text-orga3b56cb">
<p>
Copied from: <a href="https://emacs.stackexchange.com/questions/26613/is-it-possible-to-insert-images-from-the-web-with-its-url">https://emacs.stackexchange.com/questions/26613/is-it-possible-to-insert-images-from-the-web-with-its-url</a>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">Add image link type to org.</span>
  (org-add-link-type
   <span style="color: #79a8ff;">"image-url"</span>
   (<span style="color: #b6a0ff;">lambda</span> (path)
     (<span style="color: #b6a0ff;">let</span> ((img (expand-file-name
             (concat (md5 path) <span style="color: #79a8ff;">"."</span> (file-name-extension path))
             temporary-file-directory)))
       (<span style="color: #b6a0ff;">if</span> (file-exists-p img)
       (find-file img)
         (url-copy-file path img)
         (find-file img)))))
</pre>
</div>

<p>
Then use it like this:
<a href="https://d1ra4hr810e003.cloudfront.net/media/27FB7F0C-9885-42A6-9E0C19C35242B5AC/0/D968A2D0-35B8-41C6-A94A0C5C5FCA0725/F0E9E3EC-8F99-4ED8-A40DADEAF7A011A5/dbe669e9-40be-51c9-a9a0-001b0e022be7/thul-IMG_2100.jpg">https://d1ra4hr810e003.cloudfront.net/media/27FB7F0C-9885-42A6-9E0C19C35242B5AC/0/D968A2D0-35B8-41C6-A94A0C5C5FCA0725/F0E9E3EC-8F99-4ED8-A40DADEAF7A011A5/dbe669e9-40be-51c9-a9a0-001b0e022be7/thul-IMG_2100.jpg</a>
</p>
</div>
</div>
<div id="outline-container-org5c661eb" class="outline-3">
<h3 id="org5c661eb">Configure BABEL languages</h3>
<div class="outline-text-3" id="text-org5c661eb">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">Configure Babel Languages</span>
   (org-babel-do-load-languages
    'org-babel-load-languages
    '((lisp . t)
      (emacs-lisp . t)
      (shell . t)
      (dot . t)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org3b9d37b" class="outline-3">
<h3 id="org3b9d37b">org modules needed</h3>
<div class="outline-text-3" id="text-org3b9d37b">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> org-modules '(org-habit))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf6302e6" class="outline-3">
<h3 id="orgf6302e6">Magic F5 Key</h3>
<div class="outline-text-3" id="text-orgf6302e6">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">Add Magic F5 key to copy ID link in an org file.</span>
(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">my/copy-idlink-to-clipboard</span>() <span style="color: #9ac8e0; font-style: italic;">"Copy an ID link with the</span>
<span style="color: #9ac8e0; font-style: italic;">headline to killring, if no ID is there then create a new unique</span>
<span style="color: #9ac8e0; font-style: italic;">ID.  This function works only in org-mode or org-agenda buffers. </span>

<span style="color: #9ac8e0; font-style: italic;">The purpose of this function is to easily construct id:-links to </span>
<span style="color: #9ac8e0; font-style: italic;">org-mode items. If its assigned to a key it saves you marking the</span>
<span style="color: #9ac8e0; font-style: italic;">text and copying to the killring."</span>
       (<span style="color: #b6a0ff;">interactive</span>)
       (<span style="color: #b6a0ff;">when</span> (eq major-mode 'org-agenda-mode) <span style="color: #989898; font-style: italic;">;</span><span style="color: #989898; font-style: italic;">switch to orgmode</span>
     (org-agenda-show)
     (org-agenda-goto))       
       (<span style="color: #b6a0ff;">when</span> (eq major-mode 'org-mode) <span style="color: #989898; font-style: italic;">; </span><span style="color: #989898; font-style: italic;">do this only in org-mode buffers</span>
     (<span style="color: #b6a0ff;">setq</span> mytmphead (nth 4 (org-heading-components)))
         (<span style="color: #b6a0ff;">setq</span> mytmpid (funcall 'org-id-get-create))
     (<span style="color: #b6a0ff;">setq</span> mytmplink (format <span style="color: #79a8ff;">"[[id:%s][%s]]"</span> mytmpid mytmphead))
     (kill-new mytmplink)
     (message <span style="color: #79a8ff;">"Copied %s to killring (clipboard)"</span> mytmplink)))

(global-set-key (kbd <span style="color: #79a8ff;">"&lt;f5&gt;"</span>) 'my/copy-idlink-to-clipboard)
</pre>
</div>
</div>
</div>
<div id="outline-container-org7b5f586" class="outline-3">
<h3 id="org7b5f586">THE BIG GTD AGENDA CONFIGURATION</h3>
<div class="outline-text-3" id="text-org7b5f586">
<p>
This should be a complete optional component.
</p>
</div>
</div>

<div id="outline-container-org8b1efe0" class="outline-3">
<h3 id="org8b1efe0">org-habit</h3>
<div class="outline-text-3" id="text-org8b1efe0">
<p>
[TBD] Find out why I Should not delete this.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> org-habit-graph-column 50)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf3b2dca" class="outline-3">
<h3 id="orgf3b2dca">The highly strcuctured "Big Agends"</h3>
<div class="outline-text-3" id="text-orgf3b2dca">
<p>
Define TODO types and colors
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> gtd-todo-keywords '((sequence <span style="color: #79a8ff;">"TODO(t)"</span> <span style="color: #79a8ff;">"NEXT(n)"</span> <span style="color: #79a8ff;">"WAITING(w@/!)"</span> <span style="color: #79a8ff;">"|"</span> <span style="color: #79a8ff;">"DONE(d!)"</span> <span style="color: #79a8ff;">"CANCELLED(c@)"</span>)))
</pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> gtd-todo-keyword-faces '((<span style="color: #79a8ff;">"TODO"</span> . <span style="color: #79a8ff;">"red"</span>)
                               (<span style="color: #79a8ff;">"NEXT"</span> . <span style="color: #79a8ff;">"magenta"</span>)
                               (<span style="color: #79a8ff;">"WAITING"</span> .<span style="color: #79a8ff;">"yellow1"</span>)
                               (<span style="color: #79a8ff;">"CANCELLED"</span>.<span style="color: #79a8ff;">"green"</span>)
                               (<span style="color: #79a8ff;">"DONE"</span> . <span style="color: #79a8ff;">"green"</span>)))<span style="color: #989898; font-style: italic;">;</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org044f639" class="outline-3">
<h3 id="org044f639">global org paths</h3>
<div class="outline-text-3" id="text-org044f639">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">when</span> multi-user-org-path
  (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">multi-user-org-file-path</span> (r-path)
    <span style="color: #9ac8e0; font-style: italic;">"Locate multi-user-org-file-paths."</span>
    (format <span style="color: #79a8ff;">"%s%s"</span> multi-user-org-path r-path)))

(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">gtd-file</span> (name)
  <span style="color: #9ac8e0; font-style: italic;">"Where to find a gtd file."</span>
  (multi-user-org-file-path (concat <span style="color: #79a8ff;">"gtd/"</span> name)))

(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">med-file</span> (name)
  <span style="color: #9ac8e0; font-style: italic;">"Where to find a medical file."</span>
  (multi-user-org-file-path (concat <span style="color: #79a8ff;">"medical/"</span> name)))

(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">car-file</span> (name)
  <span style="color: #9ac8e0; font-style: italic;">"Where to find a car data file."</span>
   (multi-user-org-file-path (concat <span style="color: #79a8ff;">"car/"</span> name)))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf422512" class="outline-3">
<h3 id="orgf422512">Refile configuration</h3>
<div class="outline-text-3" id="text-orgf422512">
<div class="org-src-container">
<pre class="src src-emacs-lisp">

(<span style="color: #b6a0ff;">setq</span> gtd-refile-targets `((,(gtd-file <span style="color: #79a8ff;">"gtd.org"</span>) <span style="color: #f78fe7;">:maxlevel</span> . 3)
                           (,(gtd-file <span style="color: #79a8ff;">"Someday.org"</span>) <span style="color: #f78fe7;">:maxlevel</span> . 3)
                           (,(gtd-file <span style="color: #79a8ff;">"Tickler.org"</span>) <span style="color: #f78fe7;">:maxlevel</span> . 3)
                           (,(gtd-file <span style="color: #79a8ff;">"Appointments.org"</span>) <span style="color: #f78fe7;">:maxlevel</span> . 1)))

</pre>
</div>
</div>
</div>


<div id="outline-container-org25f6948" class="outline-3">
<h3 id="org25f6948">Capture Templates</h3>
<div class="outline-text-3" id="text-org25f6948">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">Set the Capture Templates</span>
   (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">transform-square-brackets-to-round-ones</span>(string-to-transform)
     <span style="color: #9ac8e0; font-style: italic;">"Transforms [ into ( and ] into ), other chars left unchanged."</span>
     (concat 
      (mapcar #'(<span style="color: #b6a0ff;">lambda</span> (c) (<span style="color: #b6a0ff;">if</span> (equal c ?\[) ?\( (<span style="color: #b6a0ff;">if</span> (equal c ?\]) ?\) c))) string-to-transform)))


 <span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">See: http://cachestocaches.com/2016/9/my-workflow-org-agenda/</span>
   (<span style="color: #b6a0ff;">setq</span> gtd-capture-templates
         `(
       <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">Logs for Projects</span>
           (<span style="color: #79a8ff;">"l"</span> <span style="color: #79a8ff;">"Project Logging"</span>)
           (<span style="color: #79a8ff;">"ls"</span> <span style="color: #79a8ff;">"sbcl-compile project"</span>
           entry (file+datetree <span style="color: #79a8ff;">"c:/Users/zzzap/Documents/Code/source-projects/ACTIVE/sbcl-compile/project-log.org"</span> <span style="color: #79a8ff;">"Project Log"</span>)
           <span style="color: #79a8ff;">"** %U - %^{Activity} :NOTE:"</span>)
       <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">Todo</span>
          (<span style="color: #79a8ff;">"t"</span> <span style="color: #79a8ff;">"Inbox Entry"</span> entry (file+headline ,(gtd-file <span style="color: #79a8ff;">"Inbox.org"</span>) <span style="color: #79a8ff;">"Tasks"</span>)
           <span style="color: #79a8ff;">"* TODO %^{Brief Description} %^g\n  OPENED: %U"</span>)
       <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">Tickler</span>
          (<span style="color: #79a8ff;">"T"</span> <span style="color: #79a8ff;">"Tickler Entry"</span> entry (file+headline ,(gtd-file <span style="color: #79a8ff;">"Tickler.org"</span>) <span style="color: #79a8ff;">"TICKLERS"</span>)
           <span style="color: #79a8ff;">"* TODO %^{Brief Description} %^g\n  OPENED: %U"</span>)
       <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">Journal Capture</span>
          (<span style="color: #79a8ff;">"j"</span> <span style="color: #79a8ff;">"Journal"</span> entry (file+datetree ,(gtd-file <span style="color: #79a8ff;">"Journal.org"</span>) )
             <span style="color: #79a8ff;">"* %?\nEntered on %U\n  %i\n  %a"</span>)
       <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">Medical Appointments  (m) Medical template</span>
          (<span style="color: #79a8ff;">"m"</span> <span style="color: #79a8ff;">"Medical Appointments"</span>)
          (<span style="color: #79a8ff;">"mo"</span> <span style="color: #79a8ff;">"(o) Office Appointent"</span> entry (file+headline ,(gtd-file <span style="color: #79a8ff;">"Appointments.org"</span>) <span style="color: #79a8ff;">"APPOINTMENTS"</span>)
           (file ,(concat user-emacs-directory <span style="color: #79a8ff;">"Office-Appointment.txt"</span>)) <span style="color: #f78fe7;">:empty-lines</span> 1 <span style="color: #f78fe7;">:time-prompt</span> t)
          (<span style="color: #79a8ff;">"mt"</span> <span style="color: #79a8ff;">"(t) Testing Appointent"</span> entry (file+headline ,(gtd-file <span style="color: #79a8ff;">"Appointments.org"</span>) <span style="color: #79a8ff;">"APPOINTMENTS"</span>)
           (file ,(concat user-emacs-directory <span style="color: #79a8ff;">"Testing-Appointment.txt"</span>)) <span style="color: #f78fe7;">:empty-lines</span> 1 <span style="color: #f78fe7;">:time-prompt</span> t)
       <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">Health Data Capture</span>
          (<span style="color: #79a8ff;">"h"</span> <span style="color: #79a8ff;">"Health Data Capture (h)"</span>)

          (<span style="color: #79a8ff;">"hb"</span> <span style="color: #79a8ff;">"Blood Pressure (b)"</span> table-line (file+headline ,(med-file <span style="color: #79a8ff;">"Medical-Data.org"</span>) <span style="color: #79a8ff;">"Blood Pressure"</span>)
            <span style="color: #79a8ff;">"|%^{Person|TOM|JOANNE}|%U|%^{Systtolic}|%^{Diastolic}|%^{Pulse}|"</span>)

          (<span style="color: #79a8ff;">"ht"</span> <span style="color: #79a8ff;">"Temperature (t)"</span> table-line (file+headline ,(med-file <span style="color: #79a8ff;">"Medical-Data.org"</span>) <span style="color: #79a8ff;">"Temperature"</span>)
           <span style="color: #79a8ff;">"|%^{Person|TOM|JOANNE}|%U|%^{Temperature}|"</span>)

          (<span style="color: #79a8ff;">"hw"</span> <span style="color: #79a8ff;">"Weight (w)"</span> table-line (file+headline ,(med-file <span style="color: #79a8ff;">"Medical-Data.org"</span>) <span style="color: #79a8ff;">"Weight"</span>)
           <span style="color: #79a8ff;">"|%^{Person|TOM|JOANNE}|%U|%^{Weight}|"</span>)
       <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">Car Related</span>
          (<span style="color: #79a8ff;">"a"</span> <span style="color: #79a8ff;">"Automotive (a)"</span>)

          (<span style="color: #79a8ff;">"ag"</span> <span style="color: #79a8ff;">"Gas Receipt (g}"</span> table-line (file+headline ,(car-file <span style="color: #79a8ff;">"Auto-Receipt.org"</span>) <span style="color: #79a8ff;">"Gas Receipts"</span>)
          <span style="color: #79a8ff;">"|%^u|%^{mileage}|%^{gallons}|%^{total}|"</span>)
       <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">org-protocol </span>
          (<span style="color: #79a8ff;">"p"</span> <span style="color: #79a8ff;">"Protocol"</span> entry (file+headline ,(gtd-file <span style="color: #79a8ff;">"notes.org"</span>) <span style="color: #79a8ff;">"Inbox"</span>)
     <span style="color: #79a8ff;">"* %^{Title}\nSource: %u, %c\n #+BEGIN_QUOTE\n%i\n#+END_QUOTE\n\n\n%?"</span>)

          (<span style="color: #79a8ff;">"L"</span> <span style="color: #79a8ff;">"Protocol Link"</span> entry (file+headline ,(gtd-file  <span style="color: #79a8ff;">"notes.org"</span>) <span style="color: #79a8ff;">"Inbox"</span>)
   <span style="color: #79a8ff;">"* %? [[%:link][%:description]] %(progn (setq kk/delete-frame-after-capture 2) \"\")\nCaptured On: %U"</span>
   <span style="color: #f78fe7;">:empty-lines</span> 1)))
</pre>
</div>
</div>
</div>
<div id="outline-container-org7fda417" class="outline-3">
<h3 id="org7fda417">Control Agenda logging</h3>
<div class="outline-text-3" id="text-org7fda417">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> org-agenda-start-with-log-mode t)
(<span style="color: #b6a0ff;">setq</span> org-log-done 'time)
(<span style="color: #b6a0ff;">setq</span> org-log-into-drawer <span style="color: #79a8ff;">"LOGBOOK"</span>)
</pre>
</div>



<p>
I have these files
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">File</th>
<th scope="col" class="org-left">TODO</th>
<th scope="col" class="org-left">Scheduled</th>
<th scope="col" class="org-left">Comments</th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">gtd</td>
<td class="org-left">yes</td>
<td class="org-left">yes or no</td>
<td class="org-left">tasks in progress</td>
<td class="org-left">Do until done</td>
</tr>

<tr>
<td class="org-left">Inbox</td>
<td class="org-left">maybe</td>
<td class="org-left">yes or no</td>
<td class="org-left">tasks on entry</td>
<td class="org-left">Do or Move</td>
</tr>

<tr>
<td class="org-left">Annual-Days</td>
<td class="org-left">no</td>
<td class="org-left">yes</td>
<td class="org-left">calendar events</td>
<td class="org-left">Hold</td>
</tr>

<tr>
<td class="org-left">Appointments</td>
<td class="org-left">yes</td>
<td class="org-left">yes</td>
<td class="org-left">appointment</td>
<td class="org-left">Do</td>
</tr>

<tr>
<td class="org-left">Tickler</td>
<td class="org-left">maybe</td>
<td class="org-left">yes</td>
<td class="org-left">Reminders</td>
<td class="org-left">Wait and Dismiss</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
Add macro to construction block agenda components of TODO items.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defmacro</span> <span style="color: #feacd0;">twr-todo-overview</span> (file-list)
  `(list '(todo <span style="color: #79a8ff;">"WAITING"</span> ((org-agenda-overriding-header <span style="color: #79a8ff;">"Waiting Tasks"</span>)(org-agenda-files ,file-list)
                           ))
    '(todo <span style="color: #79a8ff;">"NEXT"</span> ((org-agenda-overriding-header <span style="color: #79a8ff;">"Next Tasks"</span>)(org-agenda-files ,file-list)))
    '(todo <span style="color: #79a8ff;">"CANCELLED"</span> ((org-agenda-overriding-header <span style="color: #79a8ff;">"Cancelled Tasks"</span>)(org-agenda-files ,file-list)))
    '(todo <span style="color: #79a8ff;">"TODO"</span> ((org-agenda-overriding-header <span style="color: #79a8ff;">"Todo Tasks"</span>)(org-agenda-files ,file-list)))
    '(todo <span style="color: #79a8ff;">"DONE"</span> ((org-agenda-overriding-header <span style="color: #79a8ff;">"Completed Tasks"</span>)(org-agenda-files ,file-list)))))
</pre>
</div>
</div>
</div>


<div id="outline-container-org14319b4" class="outline-3">
<h3 id="org14319b4">Various agenda files for various reporting reasons</h3>
<div class="outline-text-3" id="text-org14319b4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">   (message <span style="color: #79a8ff;">"[TBD] %s"</span> <span style="color: #79a8ff;">"Fix GTD Agenda file calculation. "</span>)
 <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">There are current available tasks and Annual Events</span>
(<span style="color: #b6a0ff;">setq</span> gtd-tasks-and-events
         (mapcar #'gtd-file ' (<span style="color: #79a8ff;">"gtd.org"</span> <span style="color: #79a8ff;">"Tickler.org"</span> <span style="color: #79a8ff;">"Annual-Days.org"</span> <span style="color: #79a8ff;">"Appointments.org"</span> <span style="color: #79a8ff;">"Inbox.org"</span>)))

       <span style="color: #989898; font-style: italic;">;;   </span><span style="color: #989898; font-style: italic;">(list (gtd-file "gtd.org")</span>
   <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">      (gtd-file "Tickler.org")</span>
   <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">      (gtd-file "Annual-Days.org")</span>
   <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">      (gtd-file "Appointments.org")</span>
   <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">      (gtd-file "Inbox.org"))</span>

   <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">These are current available tasks  </span>
   (<span style="color: #b6a0ff;">setq</span> gtd-tasks
         (mapcar #'gtd-file '(<span style="color: #79a8ff;">"gtd.org"</span> <span style="color: #79a8ff;">"Inbox.org"</span> <span style="color: #79a8ff;">"Appointments.org"</span> <span style="color: #79a8ff;">"Tickler.org"</span>)))

   <span style="color: #989898; font-style: italic;">;;   </span><span style="color: #989898; font-style: italic;">(list (gtd-file "gtd.org")</span>
   <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">      (gtd-file "Inbox.org")</span>
   <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">      (gtd-file "Appointments.org")</span>
   <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">      (gtd-file "Tickler.org")))</span>


   <span style="color: #989898; font-style: italic;">;;; </span><span style="color: #989898; font-style: italic;">All items except for appointments</span>
   (<span style="color: #b6a0ff;">setq</span> gtd-no-appointments
         (mapcar #'gtd-file '(<span style="color: #79a8ff;">"gtd.org"</span> <span style="color: #79a8ff;">"Tickler.org"</span> <span style="color: #79a8ff;">"Annual-Days.org"</span> <span style="color: #79a8ff;">"Inbox.org"</span>)))
<span style="color: #989898; font-style: italic;">;;</span><span style="color: #989898; font-style: italic;">       (list (gtd-file "gtd.org")</span>
<span style="color: #989898; font-style: italic;">;;</span><span style="color: #989898; font-style: italic;">             (gtd-file "Tickler.org")</span>
<span style="color: #989898; font-style: italic;">;;</span><span style="color: #989898; font-style: italic;">             (gtd-file "Annual-Days.org")</span>
<span style="color: #989898; font-style: italic;">;;</span><span style="color: #989898; font-style: italic;">             (gtd-file "Inbox.org")))</span>

   <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">Full Events include Someday tasks which are long term and not scheduled.</span>
   (<span style="color: #b6a0ff;">setq</span> full-agenda-files (cons (gtd-file <span style="color: #79a8ff;">"Someday.org"</span>) gtd-tasks-and-events))
   (<span style="color: #b6a0ff;">setq</span> org-agenda-skip-scheduled-if-done t)
   (<span style="color: #b6a0ff;">setq</span> org-agenda-todo-list-sublevels t)
   (<span style="color: #b6a0ff;">setf</span> org-agenda-files gtd-tasks-and-events)

   (<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">org-current-is-todo</span> ()
     (string= <span style="color: #79a8ff;">"TODO"</span> (org-get-todo-state)))

</pre>
</div>
</div>
</div>


<div id="outline-container-org4971905" class="outline-3">
<h3 id="org4971905">Construct my custom agenda items</h3>
<div class="outline-text-3" id="text-org4971905">
<p>
My custom agenda-views
The D item were considered along with the Petton algoritm above. But that algo was partially removed.
Only a few of these are actually used. [TBD] Remove useless stuff.
</p>


<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #989898; font-style: italic;">;;;; </span><span style="color: #989898; font-style: italic;">Define Custom Agenda views</span>
     (<span style="color: #b6a0ff;">setq</span> gtd-custom-agenda-commands
           `(
             (<span style="color: #79a8ff;">"x"</span> . <span style="color: #79a8ff;">"Experimental"</span>)
             (<span style="color: #79a8ff;">"xx"</span> <span style="color: #79a8ff;">"xx"</span> agenda)
             (<span style="color: #79a8ff;">"xy"</span> <span style="color: #79a8ff;">"xy"</span> agenda*)
             (<span style="color: #79a8ff;">"xn"</span> <span style="color: #79a8ff;">"xn"</span> todo <span style="color: #79a8ff;">"NEXT"</span>)
             (<span style="color: #79a8ff;">"xN"</span> <span style="color: #79a8ff;">"xN"</span> todo-tree <span style="color: #79a8ff;">"NEXT"</span>)
             (<span style="color: #79a8ff;">"xa"</span> <span style="color: #79a8ff;">"Daily Overview"</span>
              <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">The first part is an agenda calendar view</span>
              ((agenda* <span style="color: #79a8ff;">""</span> ((org-agenda-files gtd-tasks-and-events)
                           (org-agenda-ndays 1)
                           (org-agenda-sorting-strategy
                            `((agenda time-up priority-down tag-up)))
                           (org-deadline-warning-days 0)))
                                       <span style="color: #989898; font-style: italic;">; </span><span style="color: #989898; font-style: italic;">exclude ticker files from todo list because they are covered in agenda</span>
               (todo <span style="color: #79a8ff;">"WAITING"</span> ((org-agenda-files gtd-no-appointments)))
               (todo <span style="color: #79a8ff;">"NEXT"</span> ((org-agenda-files gtd-no-appointments)))

  (todo <span style="color: #79a8ff;">"TODO"</span> ((org-agenda-files gtd-no-appointments)))))
             (<span style="color: #79a8ff;">"xA"</span> <span style="color: #79a8ff;">"All Appointments"</span> tags <span style="color: #79a8ff;">"+APPOINTMENT"</span>)
             (<span style="color: #79a8ff;">"xc"</span> <span style="color: #79a8ff;">"Weekly schedule"</span> agenda <span style="color: #79a8ff;">""</span>
               ((org-agenda-span 7) <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">agenda will start in week view</span>
                (org-agenda-repeating-timestamp-show-all t)))
             (<span style="color: #79a8ff;">"xf"</span> <span style="color: #79a8ff;">"Evaluate all Tasks"</span> agenda <span style="color: #79a8ff;">""</span>
               ((org-agenda-files gtd-tasks-and-events)))

             (<span style="color: #79a8ff;">"H"</span> 
              <span style="color: #79a8ff;">"All Contexts"</span>
              ((agenda)
               (tags-todo <span style="color: #79a8ff;">"CAR"</span>)
               (tags-todo <span style="color: #79a8ff;">"JAMES"</span>)
               (tags-todo <span style="color: #79a8ff;">"TOM"</span>)
               (tags-todo <span style="color: #79a8ff;">"JOANNE"</span>)
               (tags-todo <span style="color: #79a8ff;">"ATTIC"</span>)
               (tags-todo <span style="color: #79a8ff;">"HOME"</span>)
               (tags-todo <span style="color: #79a8ff;">"COMPUTER"</span>)
               (tags-todo <span style="color: #79a8ff;">"OUTDOOR"</span>)))
             (<span style="color: #79a8ff;">"D"</span> . <span style="color: #79a8ff;">"Daily Tasks"</span>)
             (<span style="color: #79a8ff;">"Dt"</span> <span style="color: #79a8ff;">"Any Project Task"</span>
              ((agenda <span style="color: #79a8ff;">""</span>
                       ((org-deadline-warning-days 7)))
               (todo)))
             (<span style="color: #79a8ff;">"Da"</span> <span style="color: #79a8ff;">"A Scheduled Project task"</span>
              ((agenda <span style="color: #79a8ff;">""</span> ((org-agenda-files gtd-tasks-and-events)
                           (org-agenda-ndays 1)
                           (org-agenda-sorting-strategy
                            `((agenda time-up priority-down tag-up)))
                           (org-deadline-warning-days 0)))
                                       <span style="color: #989898; font-style: italic;">; </span><span style="color: #989898; font-style: italic;">exclude ticker files from todo list because they are covered in agenda</span>
               (todo <span style="color: #79a8ff;">"NEXT"</span> ((org-agenda-files gtd-tasks)))))
             (<span style="color: #79a8ff;">"Do"</span> <span style="color: #79a8ff;">"Daily Overview"</span>
              <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">The first part is an agenda calendar view</span>
              ((agenda <span style="color: #79a8ff;">""</span> ((org-agenda-files gtd-tasks-and-events)
                           (org-agenda-ndays 1)
                           (org-agenda-sorting-strategy
                            `((agenda time-up priority-down tag-up)))
                           (org-deadline-warning-days 0)))
               ,@(<span style="color: #b6a0ff;">twr-todo-overview</span> gtd-no-appointments)))
             (<span style="color: #79a8ff;">"W"</span> . <span style="color: #79a8ff;">"Weekly Tasks"</span>)
             (<span style="color: #79a8ff;">"Wo"</span> <span style="color: #79a8ff;">"Weekly Overview"</span>
               <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">The first part is an agenda calendar view</span>
               ((agenda <span style="color: #79a8ff;">""</span> ((org-agenda-files full-agenda-files)
                        (org-agenda-ndays 1)
                        (org-agenda-sorting-strategy
                         `((agenda time-up priority-down tag-up)))
                        (org-deadline-warning-days 0)))
                ,@(<span style="color: #b6a0ff;">twr-todo-overview</span> full-agenda-files)))
             (<span style="color: #79a8ff;">"g"</span> . <span style="color: #79a8ff;">"GTD contexts"</span>)
             (<span style="color: #79a8ff;">"ga"</span> <span style="color: #79a8ff;">"Attic"</span> tags-todo <span style="color: #79a8ff;">"ATTIC"</span>)
             (<span style="color: #79a8ff;">"gh"</span> <span style="color: #79a8ff;">"Home"</span> tags-todo <span style="color: #79a8ff;">"HOME"</span>)
             (<span style="color: #79a8ff;">"gc"</span> <span style="color: #79a8ff;">"Computer"</span> tags-todo <span style="color: #79a8ff;">"COMPUTER"</span>)
             (<span style="color: #79a8ff;">"go"</span> <span style="color: #79a8ff;">"Outdoor"</span> tag-toto <span style="color: #79a8ff;">"OUTDOOR"</span>)
             (<span style="color: #79a8ff;">"gp"</span> <span style="color: #79a8ff;">"Projects"</span> tags-todo <span style="color: #79a8ff;">"PROJECTS"</span>)
             (<span style="color: #79a8ff;">"gf"</span> <span style="color: #79a8ff;">"Financial"</span> tags-todo <span style="color: #79a8ff;">"FINANCIAL"</span>)

             (<span style="color: #79a8ff;">"p"</span> . <span style="color: #79a8ff;">"Priorities"</span>)
             (<span style="color: #79a8ff;">"pa"</span> <span style="color: #79a8ff;">"A items"</span> tags-todo <span style="color: #79a8ff;">"+PRIORITY=\"A\""</span>)
             (<span style="color: #79a8ff;">"pb"</span> <span style="color: #79a8ff;">"B items"</span> tags-todo <span style="color: #79a8ff;">"+PRIORITY=\"B\""</span>)
             (<span style="color: #79a8ff;">"pc"</span> <span style="color: #79a8ff;">"C items"</span> tags-todo <span style="color: #79a8ff;">"+PRIORITY=\"C\""</span>)
             (<span style="color: #79a8ff;">"y"</span> agenda*)
             (<span style="color: #79a8ff;">"c"</span> <span style="color: #79a8ff;">"Weekly schedule"</span> agenda <span style="color: #79a8ff;">""</span>
              ((org-agenda-span 7) <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">agenda will start in week view</span>
               (org-agenda-repeating-timestamp-show-all t))))) <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">ensures that repeating events appear on all relevant dates</span>



</pre>
</div>
</div>
</div>
<div id="outline-container-orgfef3fcb" class="outline-3">
<h3 id="orgfef3fcb">GTD Switch</h3>
<div class="outline-text-3" id="text-orgfef3fcb">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">clear-gtd-switch</span>()
  <span style="color: #9ac8e0; font-style: italic;">"Remove the gtd customizations."</span> 
       (<span style="color: #b6a0ff;">setf</span> org-agenda-custom-commands nil
        org-capture-templates nil
        org-refile-targets nil
        org-todo-keywords  nil
        org-todo-keyword-faces nil))

(<span style="color: #b6a0ff;">defun</span> <span style="color: #feacd0;">make-gtd-switch</span>()
  <span style="color: #9ac8e0; font-style: italic;">"Add the gtd customizations."</span>
  (<span style="color: #b6a0ff;">setf</span> org-agenda-custom-commands gtd-custom-agenda-commands
        org-capture-templates gtd-capture-templates
        org-refile-targets gtd-refile-targets
        org-todo-keywords  gtd-todo-keywords
        org-todo-keyword-faces gtd-todo-keyword-faces))
<span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">And throw the switch</span>
(make-gtd-switch)
</pre>
</div>
</div>
</div>
<div id="outline-container-org98dce15" class="outline-3">
<h3 id="org98dce15">&gt;&gt;The close of the (use-package org config</h3>
<div class="outline-text-3" id="text-org98dce15">
<div class="org-src-container">
<pre class="src src-emacs-lisp">) <span style="color: #989898; font-style: italic;">;; </span><span style="color: #989898; font-style: italic;">This is close of a huge :config of (use-package org</span>
</pre>
</div>

<p>
This is a single ) to close it.
</p>
</div>
</div>
</div>

<div id="outline-container-org17190b1" class="outline-2">
<h2 id="org17190b1">Adjust for better GC</h2>
<div class="outline-text-2" id="text-org17190b1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> gc-cons-threshold (* 2 1000 1000))  
</pre>
</div>
</div>
</div>
<div id="outline-container-orge5ce4ee" class="outline-2">
<h2 id="orge5ce4ee">Test for init.el completion</h2>
<div class="outline-text-2" id="text-orge5ce4ee">
<p>
Clear to during init flag.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #b6a0ff;">setq</span> twr/init-loading-flag nil)
(message <span style="color: #79a8ff;">"&lt;&lt;&lt;&lt;  !!!     INIT.EL FINISHED   !!!   &gt;&gt;&gt;&gt;&gt; "</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf922922" class="outline-2">
<h2 id="orgf922922">Load config</h2>
<div class="outline-text-2" id="text-orgf922922">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(load <span style="color: #79a8ff;">"~/.emacs-local"</span>)
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2024-12-02 Mon 15:20</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
